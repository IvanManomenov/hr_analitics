# –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

–¶–µ–ª—å –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏: –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–æ–¥–µ–ª—å, –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—é—â—É—é —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–ø—Ä–∏–∑–Ω–∞–∫ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 1) –ø–æ –∏–º–µ—é—â–∏–º—Å—è –¥–∞–Ω–Ω—ã–º. –ü–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é –∑–∞–∫–∞–∑—â–∏–∫–∞, –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ü–µ–Ω–µ–Ω–∞ –º–µ—Ç—Ä–∏–∫–æ–π SMAPE (–æ–ø–∏—Å–∞–Ω–∏–µ–Ω–∏–∂–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ)

## –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö


```python
!pip install phik
!pip install -U scikit-learn   
!pip install shap
!pip install matplotlib==3.5.0 -q
```

    Collecting phik
      Downloading phik-0.12.4-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (686 kB)
    [K     |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 686 kB 2.6 MB/s eta 0:00:01
    [?25hRequirement already satisfied: pandas>=0.25.1 in /opt/conda/lib/python3.9/site-packages (from phik) (1.2.4)
    Requirement already satisfied: scipy>=1.5.2 in /opt/conda/lib/python3.9/site-packages (from phik) (1.9.1)
    Requirement already satisfied: joblib>=0.14.1 in /opt/conda/lib/python3.9/site-packages (from phik) (1.1.0)
    Requirement already satisfied: numpy>=1.18.0 in /opt/conda/lib/python3.9/site-packages (from phik) (1.21.1)
    Requirement already satisfied: matplotlib>=2.2.3 in /opt/conda/lib/python3.9/site-packages (from phik) (3.3.4)
    Requirement already satisfied: kiwisolver>=1.0.1 in /opt/conda/lib/python3.9/site-packages (from matplotlib>=2.2.3->phik) (1.4.4)
    Requirement already satisfied: pillow>=6.2.0 in /opt/conda/lib/python3.9/site-packages (from matplotlib>=2.2.3->phik) (8.4.0)
    Requirement already satisfied: pyparsing!=2.0.4,!=2.1.2,!=2.1.6,>=2.0.3 in /opt/conda/lib/python3.9/site-packages (from matplotlib>=2.2.3->phik) (2.4.7)
    Requirement already satisfied: python-dateutil>=2.1 in /opt/conda/lib/python3.9/site-packages (from matplotlib>=2.2.3->phik) (2.8.1)
    Requirement already satisfied: cycler>=0.10 in /opt/conda/lib/python3.9/site-packages (from matplotlib>=2.2.3->phik) (0.11.0)
    Requirement already satisfied: pytz>=2017.3 in /opt/conda/lib/python3.9/site-packages (from pandas>=0.25.1->phik) (2021.1)
    Requirement already satisfied: six>=1.5 in /opt/conda/lib/python3.9/site-packages (from python-dateutil>=2.1->matplotlib>=2.2.3->phik) (1.16.0)
    Installing collected packages: phik
    Successfully installed phik-0.12.4
    Requirement already satisfied: scikit-learn in /opt/conda/lib/python3.9/site-packages (0.24.1)
    Collecting scikit-learn
      Downloading scikit_learn-1.5.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (13.4 MB)
    [K     |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 13.4 MB 1.4 MB/s eta 0:00:01
    [?25hRequirement already satisfied: numpy>=1.19.5 in /opt/conda/lib/python3.9/site-packages (from scikit-learn) (1.21.1)
    Requirement already satisfied: threadpoolctl>=3.1.0 in /opt/conda/lib/python3.9/site-packages (from scikit-learn) (3.1.0)
    Collecting joblib>=1.2.0
      Downloading joblib-1.4.2-py3-none-any.whl (301 kB)
    [K     |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 301 kB 71.8 MB/s eta 0:00:01
    [?25hRequirement already satisfied: scipy>=1.6.0 in /opt/conda/lib/python3.9/site-packages (from scikit-learn) (1.9.1)
    Installing collected packages: joblib, scikit-learn
      Attempting uninstall: joblib
        Found existing installation: joblib 1.1.0
        Uninstalling joblib-1.1.0:
          Successfully uninstalled joblib-1.1.0
      Attempting uninstall: scikit-learn
        Found existing installation: scikit-learn 0.24.1
        Uninstalling scikit-learn-0.24.1:
          Successfully uninstalled scikit-learn-0.24.1
    Successfully installed joblib-1.4.2 scikit-learn-1.5.2
    Collecting shap
      Downloading shap-0.46.0-cp39-cp39-manylinux_2_12_x86_64.manylinux2010_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (539 kB)
    [K     |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 539 kB 2.0 MB/s eta 0:00:01
    [?25hRequirement already satisfied: packaging>20.9 in /opt/conda/lib/python3.9/site-packages (from shap) (21.3)
    Collecting slicer==0.0.8
      Downloading slicer-0.0.8-py3-none-any.whl (15 kB)
    Requirement already satisfied: pandas in /opt/conda/lib/python3.9/site-packages (from shap) (1.2.4)
    Requirement already satisfied: scikit-learn in /opt/conda/lib/python3.9/site-packages (from shap) (1.5.2)
    Requirement already satisfied: numba in /opt/conda/lib/python3.9/site-packages (from shap) (0.56.0)
    Requirement already satisfied: tqdm>=4.27.0 in /opt/conda/lib/python3.9/site-packages (from shap) (4.61.2)
    Requirement already satisfied: scipy in /opt/conda/lib/python3.9/site-packages (from shap) (1.9.1)
    Collecting cloudpickle
      Downloading cloudpickle-3.1.0-py3-none-any.whl (22 kB)
    Requirement already satisfied: numpy in /opt/conda/lib/python3.9/site-packages (from shap) (1.21.1)
    Requirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in /opt/conda/lib/python3.9/site-packages (from packaging>20.9->shap) (2.4.7)
    Requirement already satisfied: setuptools in /opt/conda/lib/python3.9/site-packages (from numba->shap) (49.6.0.post20210108)
    Requirement already satisfied: llvmlite<0.40,>=0.39.0dev0 in /opt/conda/lib/python3.9/site-packages (from numba->shap) (0.39.0)
    Requirement already satisfied: python-dateutil>=2.7.3 in /opt/conda/lib/python3.9/site-packages (from pandas->shap) (2.8.1)
    Requirement already satisfied: pytz>=2017.3 in /opt/conda/lib/python3.9/site-packages (from pandas->shap) (2021.1)
    Requirement already satisfied: six>=1.5 in /opt/conda/lib/python3.9/site-packages (from python-dateutil>=2.7.3->pandas->shap) (1.16.0)
    Requirement already satisfied: joblib>=1.2.0 in /opt/conda/lib/python3.9/site-packages (from scikit-learn->shap) (1.4.2)
    Requirement already satisfied: threadpoolctl>=3.1.0 in /opt/conda/lib/python3.9/site-packages (from scikit-learn->shap) (3.1.0)
    Installing collected packages: slicer, cloudpickle, shap
    Successfully installed cloudpickle-3.1.0 shap-0.46.0 slicer-0.0.8



```python
# –∏–º–ø–æ—Ä—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
import warnings

import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np
from phik import report
from phik.report import plot_correlation_matrix

from sklearn.preprocessing import OneHotEncoder, OrdinalEncoder, RobustScaler,MinMaxScaler, StandardScaler, LabelEncoder


from sklearn.metrics import make_scorer, roc_auc_score

from sklearn.impute import SimpleImputer

from sklearn.pipeline import Pipeline
from sklearn.compose import ColumnTransformer

from sklearn.model_selection import KFold

from sklearn.linear_model import LinearRegression, Lasso, Ridge
from sklearn.tree import DecisionTreeClassifier, DecisionTreeRegressor
from sklearn.svm import SVC
from sklearn.neighbors import KNeighborsClassifier

from sklearn.model_selection import train_test_split, GridSearchCV, RandomizedSearchCV

from sklearn.inspection import permutation_importance

import shap

from matplotlib.colors import ListedColormap


RANDOM_STATE = 42
TEST_SIZE = 0.25

pd.options.mode.chained_assignment = None
warnings.filterwarnings('ignore')

plt.rcParams ['figure.figsize'] = [16, 8]
```


```python
sat_df = pd.read_csv('/datasets/train_job_satisfaction_rate.csv')# —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
test_features_df = pd.read_csv('/datasets/test_features.csv')# –≤—Ö–æ–¥–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∏
test_rate_df = pd.read_csv('/datasets/test_target_job_satisfaction_rate.csv')# —Ü–µ–ª–µ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∏
```

## –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞


```python
sat_df.info()
sat_df.head()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 4000 entries, 0 to 3999
    Data columns (total 10 columns):
     #   Column                 Non-Null Count  Dtype  
    ---  ------                 --------------  -----  
     0   id                     4000 non-null   int64  
     1   dept                   3994 non-null   object 
     2   level                  3996 non-null   object 
     3   workload               4000 non-null   object 
     4   employment_years       4000 non-null   int64  
     5   last_year_promo        4000 non-null   object 
     6   last_year_violations   4000 non-null   object 
     7   supervisor_evaluation  4000 non-null   int64  
     8   salary                 4000 non-null   int64  
     9   job_satisfaction_rate  4000 non-null   float64
    dtypes: float64(1), int64(4), object(5)
    memory usage: 312.6+ KB





<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>job_satisfaction_rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>155278</td>
      <td>sales</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>1</td>
      <td>24000</td>
      <td>0.58</td>
    </tr>
    <tr>
      <th>1</th>
      <td>653870</td>
      <td>hr</td>
      <td>junior</td>
      <td>high</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>38400</td>
      <td>0.76</td>
    </tr>
    <tr>
      <th>2</th>
      <td>184592</td>
      <td>sales</td>
      <td>junior</td>
      <td>low</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>2</td>
      <td>12000</td>
      <td>0.11</td>
    </tr>
    <tr>
      <th>3</th>
      <td>171431</td>
      <td>technology</td>
      <td>junior</td>
      <td>low</td>
      <td>4</td>
      <td>no</td>
      <td>no</td>
      <td>2</td>
      <td>18000</td>
      <td>0.37</td>
    </tr>
    <tr>
      <th>4</th>
      <td>693419</td>
      <td>hr</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>3</td>
      <td>22800</td>
      <td>0.20</td>
    </tr>
  </tbody>
</table>
</div>



–í–∏–¥–Ω–æ, —á—Ç–æ –µ—Å—Ç—å –ø—Ä–æ–ø—É—Å–∫–∏ –≤ —Å—Ç–æ–±—Ü–∞—Ö *debt* –∏ *level*. –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —ç—Ç–∏ –ø—Ä–æ–ø—É—Å–∫–∏


```python
sat_df.query('dept.isna()')
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>job_satisfaction_rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1526</th>
      <td>694746</td>
      <td>NaN</td>
      <td>junior</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>21600</td>
      <td>0.62</td>
    </tr>
    <tr>
      <th>1630</th>
      <td>814624</td>
      <td>NaN</td>
      <td>junior</td>
      <td>medium</td>
      <td>3</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>24000</td>
      <td>0.88</td>
    </tr>
    <tr>
      <th>1633</th>
      <td>475114</td>
      <td>NaN</td>
      <td>junior</td>
      <td>high</td>
      <td>4</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>31200</td>
      <td>0.63</td>
    </tr>
    <tr>
      <th>2781</th>
      <td>497243</td>
      <td>NaN</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>3</td>
      <td>26400</td>
      <td>0.28</td>
    </tr>
    <tr>
      <th>2975</th>
      <td>168668</td>
      <td>NaN</td>
      <td>junior</td>
      <td>low</td>
      <td>3</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>18000</td>
      <td>0.88</td>
    </tr>
    <tr>
      <th>3866</th>
      <td>641150</td>
      <td>NaN</td>
      <td>junior</td>
      <td>low</td>
      <td>3</td>
      <td>no</td>
      <td>yes</td>
      <td>4</td>
      <td>12000</td>
      <td>0.54</td>
    </tr>
  </tbody>
</table>
</div>




```python
display(sat_df.query('level.isna()'))
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>job_satisfaction_rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1209</th>
      <td>631073</td>
      <td>sales</td>
      <td>NaN</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>27600</td>
      <td>0.66</td>
    </tr>
    <tr>
      <th>1469</th>
      <td>416327</td>
      <td>sales</td>
      <td>NaN</td>
      <td>low</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>18000</td>
      <td>0.73</td>
    </tr>
    <tr>
      <th>1745</th>
      <td>135043</td>
      <td>sales</td>
      <td>NaN</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>3</td>
      <td>26400</td>
      <td>0.30</td>
    </tr>
    <tr>
      <th>2522</th>
      <td>998838</td>
      <td>sales</td>
      <td>NaN</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>27600</td>
      <td>0.71</td>
    </tr>
  </tbody>
</table>
</div>


–ö–∞–∫ –º—ã –≤–∏–¥–∏–º, —ç—Ç–æ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, –∞ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏ —Å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–≤–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö, –∞ –≤–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–∞–∂—ë—Ä—ã/–ª—é–¥–∏, –∫–æ—Ç–æ—Ä—ã—Ö –µ—â—ë –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –æ—Ç–¥–µ–ª). –û—Å—Ç–∞–≤–∏–º –≤—Å—ë –∫–∞–∫ –µ—Å—Ç—å(*–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–¥–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ*)

–ü—Ä–æ–≤–µ—Ä–∏–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã –Ω–∞ –Ω–µ—è–≤–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã


```python
for col in sat_df.select_dtypes('object').columns.tolist():
    print(col, sat_df[col].unique())

sat_df['level'] = sat_df['level'].replace('sinior', 'senior')
```

    dept ['sales' 'hr' 'technology' 'purchasing' 'marketing' nan]
    level ['junior' 'middle' 'sinior' nan]
    workload ['medium' 'high' 'low']
    last_year_promo ['no' 'yes']
    last_year_violations ['no' 'yes']


–ù–µ—è–≤–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ


```python
sat_df = sat_df.drop_duplicates()
sat_df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    Int64Index: 4000 entries, 0 to 3999
    Data columns (total 10 columns):
     #   Column                 Non-Null Count  Dtype  
    ---  ------                 --------------  -----  
     0   id                     4000 non-null   int64  
     1   dept                   3994 non-null   object 
     2   level                  3996 non-null   object 
     3   workload               4000 non-null   object 
     4   employment_years       4000 non-null   int64  
     5   last_year_promo        4000 non-null   object 
     6   last_year_violations   4000 non-null   object 
     7   supervisor_evaluation  4000 non-null   int64  
     8   salary                 4000 non-null   int64  
     9   job_satisfaction_rate  4000 non-null   float64
    dtypes: float64(1), int64(4), object(5)
    memory usage: 343.8+ KB


–ü–æ–ª–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ç–∞–∫–∂–µ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

–¢–µ–ø–µ—Ä—å –Ω–∞–∑–Ω–∞—á–∏–º –∏–Ω–¥–µ–∫—Å–æ–º —Å—Ç—Ä–æ–∫–∏ id —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞


```python
sat_df = sat_df.set_index('id')
sat_df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>job_satisfaction_rate</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>155278</th>
      <td>sales</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>1</td>
      <td>24000</td>
      <td>0.58</td>
    </tr>
    <tr>
      <th>653870</th>
      <td>hr</td>
      <td>junior</td>
      <td>high</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>38400</td>
      <td>0.76</td>
    </tr>
    <tr>
      <th>184592</th>
      <td>sales</td>
      <td>junior</td>
      <td>low</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>2</td>
      <td>12000</td>
      <td>0.11</td>
    </tr>
    <tr>
      <th>171431</th>
      <td>technology</td>
      <td>junior</td>
      <td>low</td>
      <td>4</td>
      <td>no</td>
      <td>no</td>
      <td>2</td>
      <td>18000</td>
      <td>0.37</td>
    </tr>
    <tr>
      <th>693419</th>
      <td>hr</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>3</td>
      <td>22800</td>
      <td>0.20</td>
    </tr>
  </tbody>
</table>
</div>



### –¢–µ—Å—Ç–æ–≤–∞—è –≤—ã–±–æ—Ä–∫–∞

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ–¥—ë–º –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∏


```python
display(test_features_df.head())
display(test_rate_df.head())
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>485046</td>
      <td>marketing</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>28800</td>
    </tr>
    <tr>
      <th>1</th>
      <td>686555</td>
      <td>hr</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>30000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>467458</td>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
    </tr>
    <tr>
      <th>3</th>
      <td>418655</td>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>6</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
    </tr>
    <tr>
      <th>4</th>
      <td>789145</td>
      <td>hr</td>
      <td>middle</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>40800</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>job_satisfaction_rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>130604</td>
      <td>0.74</td>
    </tr>
    <tr>
      <th>1</th>
      <td>825977</td>
      <td>0.75</td>
    </tr>
    <tr>
      <th>2</th>
      <td>418490</td>
      <td>0.60</td>
    </tr>
    <tr>
      <th>3</th>
      <td>555320</td>
      <td>0.72</td>
    </tr>
    <tr>
      <th>4</th>
      <td>826430</td>
      <td>0.08</td>
    </tr>
  </tbody>
</table>
</div>


–ü—Ä–æ–≤–µ—Ä–∏–º –ø—Ä–æ–ø—É—Å–∫–∏


```python
test_features_df.info()
test_rate_df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 2000 entries, 0 to 1999
    Data columns (total 9 columns):
     #   Column                 Non-Null Count  Dtype 
    ---  ------                 --------------  ----- 
     0   id                     2000 non-null   int64 
     1   dept                   1998 non-null   object
     2   level                  1999 non-null   object
     3   workload               2000 non-null   object
     4   employment_years       2000 non-null   int64 
     5   last_year_promo        2000 non-null   object
     6   last_year_violations   2000 non-null   object
     7   supervisor_evaluation  2000 non-null   int64 
     8   salary                 2000 non-null   int64 
    dtypes: int64(4), object(5)
    memory usage: 140.8+ KB
    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 2000 entries, 0 to 1999
    Data columns (total 2 columns):
     #   Column                 Non-Null Count  Dtype  
    ---  ------                 --------------  -----  
     0   id                     2000 non-null   int64  
     1   job_satisfaction_rate  2000 non-null   float64
    dtypes: float64(1), int64(1)
    memory usage: 31.4 KB


2 —á–µ–ª–æ–≤–µ–∫–∞ –±–µ–∑ –æ—Ç–¥–µ–ª–∞ –∏ 1 –±–µ–∑ —É—Ä–æ–≤–Ω—è –¥–æ–ª–∂–Ω–æ—Å—Ç–∏.

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∏–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã


```python
for col in test_features_df.select_dtypes('object').columns.tolist():
    print(col, test_features_df[col].unique())

test_features_df['level'] = test_features_df['level'].replace('sinior', 'senior')
```

    dept ['marketing' 'hr' 'sales' 'purchasing' 'technology' nan ' ']
    level ['junior' 'middle' 'sinior' nan]
    workload ['medium' 'low' 'high' ' ']
    last_year_promo ['no' 'yes']
    last_year_violations ['no' 'yes']


–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å—Ç–æ–ª–±—Ü–∞—Ö *dept* –∏ *workload*, –ø–æ—Å–º–æ—Ç—Ä–∏–º


```python
display(test_features_df.query('dept == " "'))
display(test_features_df.query('workload == " "'))
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1699</th>
      <td>822186</td>
      <td></td>
      <td>middle</td>
      <td>medium</td>
      <td>3</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>38400</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>15</th>
      <td>590867</td>
      <td>marketing</td>
      <td>junior</td>
      <td></td>
      <td>4</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>28800</td>
    </tr>
  </tbody>
</table>
</div>


–í—Å–µ–≥–æ 2 —Å—Ç—Ä–æ—á–∫–∏. –ó–∞–º–µ–Ω–∏–º –∏—Ö –Ω–∞ NaN


```python
test_features_df['dept'] = test_features_df['dept'].replace(' ', np.nan)
test_features_df['workload'] = test_features_df['workload'].replace(' ', np.nan)

display(test_features_df.query('id == 822186 or id == 590867'))
test_features_df.info()
test_rate_df.info()
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>15</th>
      <td>590867</td>
      <td>marketing</td>
      <td>junior</td>
      <td>NaN</td>
      <td>4</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>28800</td>
    </tr>
    <tr>
      <th>1699</th>
      <td>822186</td>
      <td>NaN</td>
      <td>middle</td>
      <td>medium</td>
      <td>3</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>38400</td>
    </tr>
  </tbody>
</table>
</div>


    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 2000 entries, 0 to 1999
    Data columns (total 9 columns):
     #   Column                 Non-Null Count  Dtype 
    ---  ------                 --------------  ----- 
     0   id                     2000 non-null   int64 
     1   dept                   1997 non-null   object
     2   level                  1999 non-null   object
     3   workload               1999 non-null   object
     4   employment_years       2000 non-null   int64 
     5   last_year_promo        2000 non-null   object
     6   last_year_violations   2000 non-null   object
     7   supervisor_evaluation  2000 non-null   int64 
     8   salary                 2000 non-null   int64 
    dtypes: int64(4), object(5)
    memory usage: 140.8+ KB
    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 2000 entries, 0 to 1999
    Data columns (total 2 columns):
     #   Column                 Non-Null Count  Dtype  
    ---  ------                 --------------  -----  
     0   id                     2000 non-null   int64  
     1   job_satisfaction_rate  2000 non-null   float64
    dtypes: float64(1), int64(1)
    memory usage: 31.4 KB


–î—É–±–ª–∏–∫–∞—Ç—ã –∏ –ø—Ä–æ–ø—É—Å–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

–ó–∞–º–µ–Ω–∏–º –∏–Ω–¥–µ–∫—Å—ã —Å—Ç—Ä–æ–∫ –Ω–∞ id —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤


```python
test_features_df = test_features_df.set_index('id')
test_rate_df = test_rate_df.set_index('id')
```

–û–±—ä–µ–¥–∏–Ω–∏–º 2 —Ç–∞–±–ª–∏—Ü—ã


```python
test_df = test_features_df.join(test_rate_df)
test_df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>job_satisfaction_rate</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>485046</th>
      <td>marketing</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>28800</td>
      <td>0.79</td>
    </tr>
    <tr>
      <th>686555</th>
      <td>hr</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>30000</td>
      <td>0.72</td>
    </tr>
    <tr>
      <th>467458</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
      <td>0.64</td>
    </tr>
    <tr>
      <th>418655</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>6</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
      <td>0.60</td>
    </tr>
    <tr>
      <th>789145</th>
      <td>hr</td>
      <td>middle</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>40800</td>
      <td>0.75</td>
    </tr>
  </tbody>
</table>
</div>



## –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

–ë—É–¥–µ–º —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Ä–∞–∑–ª–∏—á–∏—è

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏


```python
def show_train_test_pie(df1, df2, col, val, tit):
    temp1 = pd.pivot_table(df1, index = col, values = val, aggfunc = 'count')
    temp1.columns = ['count_train']
    temp1['percentage_train'] = temp1['count_train']/len(df1)
    temp1.plot(kind = 'pie', y = 'count_train', title = tit + " –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ")
    plt.legend(bbox_to_anchor=( 1.05 , 1 ), loc='best', borderaxespad= 0)
    
    
    temp2 = pd.pivot_table(df2, index = col, values = val, aggfunc = 'count')
    temp2.columns = ['count_test']
    temp2['percentage_test'] = temp2['count_test']/len(df2)
    temp2.plot(kind = 'pie', y = 'count_test', title = tit + " –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ")
    plt.legend(bbox_to_anchor=( 1.05 , 1 ), loc='best', borderaxespad= 0)
    
    plt.show()
    display(temp1.join(temp2)[['percentage_train', 'percentage_test']])
    
sat_df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    Int64Index: 4000 entries, 155278 to 338347
    Data columns (total 9 columns):
     #   Column                 Non-Null Count  Dtype  
    ---  ------                 --------------  -----  
     0   dept                   3994 non-null   object 
     1   level                  3996 non-null   object 
     2   workload               4000 non-null   object 
     3   employment_years       4000 non-null   int64  
     4   last_year_promo        4000 non-null   object 
     5   last_year_violations   4000 non-null   object 
     6   supervisor_evaluation  4000 non-null   int64  
     7   salary                 4000 non-null   int64  
     8   job_satisfaction_rate  4000 non-null   float64
    dtypes: float64(1), int64(3), object(5)
    memory usage: 312.5+ KB



```python
show_train_test_pie(sat_df, test_df, 'dept', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –æ—Ç–¥–µ–ª—É')
```


    
![png](output_41_0.png)
    



    
![png](output_41_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>dept</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>hr</th>
      <td>0.1140</td>
      <td>0.1135</td>
    </tr>
    <tr>
      <th>marketing</th>
      <td>0.1375</td>
      <td>0.1395</td>
    </tr>
    <tr>
      <th>purchasing</th>
      <td>0.1525</td>
      <td>0.1365</td>
    </tr>
    <tr>
      <th>sales</th>
      <td>0.3780</td>
      <td>0.3815</td>
    </tr>
    <tr>
      <th>technology</th>
      <td>0.2165</td>
      <td>0.2275</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_train_test_pie(sat_df, test_df, 'level', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏')
```


    
![png](output_42_0.png)
    



    
![png](output_42_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>level</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>junior</th>
      <td>0.4735</td>
      <td>0.4870</td>
    </tr>
    <tr>
      <th>middle</th>
      <td>0.4360</td>
      <td>0.4270</td>
    </tr>
    <tr>
      <th>senior</th>
      <td>0.0895</td>
      <td>0.0855</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_train_test_pie(sat_df, test_df, 'workload', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏')
```


    
![png](output_43_0.png)
    



    
![png](output_43_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>workload</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>high</th>
      <td>0.1835</td>
      <td>0.1815</td>
    </tr>
    <tr>
      <th>low</th>
      <td>0.3000</td>
      <td>0.2965</td>
    </tr>
    <tr>
      <th>medium</th>
      <td>0.5165</td>
      <td>0.5215</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_train_test_pie(sat_df, test_df, 'last_year_promo', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é –ø–æ–≤—ã—à–µ–Ω–∏—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥')
```


    
![png](output_44_0.png)
    



    
![png](output_44_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>last_year_promo</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.97</td>
      <td>0.9685</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.03</td>
      <td>0.0315</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_train_test_pie(sat_df, test_df, 'last_year_violations', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é –Ω–∞—Ä—É—à–µ–Ω–∏–π –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥')
```


    
![png](output_45_0.png)
    



    
![png](output_45_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>last_year_violations</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.86025</td>
      <td>0.869</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.13975</td>
      <td>0.131</td>
    </tr>
  </tbody>
</table>
</div>


–í–∏–¥–µ–Ω –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏—Å–±–∞–ª–∞–Ω—Å –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–∞—Ö:

* level - —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —É—Ä–æ–≤–Ω—è *senior* –≤ 3 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ, —á–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —É—Ä–æ–≤–Ω—è *middle* –∏–ª–∏ *junior*

* last_year_promo - –ª–∏—à—å 3% —Å—Ç–æ—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ–ª—É—á–∞–ª–æ –ø–æ–≤—ã—à–µ–Ω–∏–µ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥

* last_year_violations - –ø–µ—Ä–µ–≤–µ—Å –≤ 6 —Ä–∞–∑ –≤ –ø–æ–ª—å–∑—É –Ω–µ–Ω–∞—Ä—É—à–∞–≤—à–∏—Ö —Ç—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä 

–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–∑–ª–∏—á–∏–π –º–µ–∂–¥—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–æ–π –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–∞—Ö –Ω–µ—Ç

 ### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏

##### –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑


```python
display(sat_df.describe())
display(test_df.describe())
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>employment_years</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>job_satisfaction_rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>4000.000000</td>
      <td>4000.000000</td>
      <td>4000.000000</td>
      <td>4000.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>3.718500</td>
      <td>3.476500</td>
      <td>33926.700000</td>
      <td>0.533995</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.542513</td>
      <td>1.008812</td>
      <td>14900.703838</td>
      <td>0.225327</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>12000.000000</td>
      <td>0.030000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2.000000</td>
      <td>3.000000</td>
      <td>22800.000000</td>
      <td>0.360000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>3.000000</td>
      <td>4.000000</td>
      <td>30000.000000</td>
      <td>0.560000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>6.000000</td>
      <td>4.000000</td>
      <td>43200.000000</td>
      <td>0.710000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>10.000000</td>
      <td>5.000000</td>
      <td>98400.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>employment_years</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>job_satisfaction_rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>2000.000000</td>
      <td>2000.000000</td>
      <td>2000.000000</td>
      <td>2000.00000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>3.666500</td>
      <td>3.526500</td>
      <td>34066.800000</td>
      <td>0.54878</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.537222</td>
      <td>0.996892</td>
      <td>15398.436729</td>
      <td>0.22011</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>12000.000000</td>
      <td>0.03000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>22800.000000</td>
      <td>0.38000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>3.000000</td>
      <td>4.000000</td>
      <td>30000.000000</td>
      <td>0.58000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>6.000000</td>
      <td>4.000000</td>
      <td>43200.000000</td>
      <td>0.72000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>10.000000</td>
      <td>5.000000</td>
      <td>96000.000000</td>
      <td>1.00000</td>
    </tr>
  </tbody>
</table>
</div>


–Ø–≤–Ω—ã—Ö –≤—ã–±—Ä–æ—Å–æ–≤ –Ω–µ –≤–∏–¥–Ω–æ

##### –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑


```python
def show_hist_boxplot(df,sign, bins, title1, title2 = None): 
    
    plt.subplot(1, 2, 1)
    df[sign].plot(kind = 'hist', bins = bins, alpha = 0.7, title = title1)
    
    plt.axvline(x=np.nanmedian (df[sign]), color='red', linestyle='--', linewidth= 3 , label='–º–µ–¥–∏–∞–Ω–∞ = ' + str(df[sign].median())) 
    plt.axvline(x=np.nanmean (df[sign]), color='green', linestyle='--', linewidth= 3 , label='—Å—Ä–µ–¥–Ω–µ–µ = ' + str(round(df[sign].mean(), 2))) 
    plt.legend()
    if title2 == None:
        return
    plt.subplot(1, 2, 2)
    df.boxplot(sign)
    plt.title(title2)
    plt.show()  

def show_train_test_barplot(df1, df2, col, val, tit):
    temp1 = pd.pivot_table(df1, index = col, values = val, aggfunc = 'count')
    temp1.columns = ['count_train']
    temp1['percentage_train'] = temp1['count_train']/len(df1)
    temp1.plot(kind = 'bar', y = 'count_train', title = tit + " –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ")
    plt.legend(loc='best')
    plt.ylabel('count')
    
    temp2 = pd.pivot_table(df2, index = col, values = val, aggfunc = 'count')
    temp2.columns = ['count_test']
    temp2['percentage_test'] = temp2['count_test']/len(df2)
    temp2.plot(kind = 'bar', y = 'count_test', title = tit + " –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ")
    plt.legend(loc='best')
    plt.ylabel('count')
    
    display(temp1.join(temp2)[['percentage_train', 'percentage_test']])
    plt.show()
sat_df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    Int64Index: 4000 entries, 155278 to 338347
    Data columns (total 9 columns):
     #   Column                 Non-Null Count  Dtype  
    ---  ------                 --------------  -----  
     0   dept                   3994 non-null   object 
     1   level                  3996 non-null   object 
     2   workload               4000 non-null   object 
     3   employment_years       4000 non-null   int64  
     4   last_year_promo        4000 non-null   object 
     5   last_year_violations   4000 non-null   object 
     6   supervisor_evaluation  4000 non-null   int64  
     7   salary                 4000 non-null   int64  
     8   job_satisfaction_rate  4000 non-null   float64
    dtypes: float64(1), int64(3), object(5)
    memory usage: 312.5+ KB



```python
show_train_test_barplot(sat_df, test_df, 'employment_years', 'level', '–ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ —Å—Ç–∞–∂—É —Ä–∞–±–æ—Ç—ã')
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>employment_years</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.24050</td>
      <td>0.2605</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.19625</td>
      <td>0.1870</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.12075</td>
      <td>0.1170</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.09600</td>
      <td>0.0935</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.09500</td>
      <td>0.0895</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.07175</td>
      <td>0.0690</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.07525</td>
      <td>0.0870</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.04825</td>
      <td>0.0455</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.03250</td>
      <td>0.0330</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.02275</td>
      <td>0.0175</td>
    </tr>
  </tbody>
</table>
</div>



    
![png](output_53_1.png)
    



    
![png](output_53_2.png)
    



```python
show_train_test_barplot(sat_df, test_df, 'supervisor_evaluation', 'level', '–ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –æ—Ü–µ–Ω–∫–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã')
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>supervisor_evaluation</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.05025</td>
      <td>0.0440</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.09675</td>
      <td>0.0980</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.31550</td>
      <td>0.2870</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.40050</td>
      <td>0.4285</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.13600</td>
      <td>0.1420</td>
    </tr>
  </tbody>
</table>
</div>



    
![png](output_54_1.png)
    



    
![png](output_54_2.png)
    



```python
show_hist_boxplot(sat_df, 'salary', 20, '–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—Ç—Ä–µ–Ω.–≤—ã–±–æ—Ä–∫–∞)', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—Ç—Ä–µ–Ω.–≤—ã–±–æ—Ä–∫–∞)')
show_hist_boxplot(test_df, 'salary', 20, '–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—Ç–µ—Å—Ç.–≤—ã–±–æ—Ä–∫–∞)', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—Ç–µ—Å—Ç.–≤—ã–±–æ—Ä–∫–∞)')
```


    
![png](output_55_0.png)
    



    
![png](output_55_1.png)
    



```python
show_hist_boxplot(sat_df, 'job_satisfaction_rate', 20, '–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ —É—Ä–æ–≤–Ω—é —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (—Ç—Ä–µ–Ω.–≤—ã–±–æ—Ä–∫–∞)', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞ –ø–æ —É—Ä–æ–≤–Ω—é —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (—Ç—Ä–µ–Ω.–≤—ã–±–æ—Ä–∫–∞)')
show_hist_boxplot(test_df, 'job_satisfaction_rate', 20, '–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ —É—Ä–æ–≤–Ω—é —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (—Ç–µ—Å—Ç.–≤—ã–±–æ—Ä–∫–∞)', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞ –ø–æ —É—Ä–æ–≤–Ω—é —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (—Ç–µ—Å—Ç.–≤—ã–±–æ—Ä–∫–∞)')
```


    
![png](output_56_0.png)
    



    
![png](output_56_1.png)
    


–í—ã–≤–æ–¥—ã –∏–∑ –∞–Ω–∞–ª–∏–∑–∞:

* –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π –ø–æ —Å—Ç–∞–∂—É —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–æ–º–µ—Ä–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç—Å—è

* –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è - –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ—Ü–µ–Ω–æ–∫ - 3 –∏ 4

* –ó–∞—Ä–ø–ª–∞—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –±–ª–∏–∑–∫–æ –∫ –ü—É–∞—Å—Å–æ–Ω–æ–≤—Å–∫–æ–º—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é (–∏–∑-–∑–∞ —Ö–≤–æ—Å—Ç–∞ —Å–ø—Ä–∞–≤–∞)

* –£–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–æ–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –±–ª–∏–∑–∫–æ –∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É (–∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–µ–±–æ–ª—å—à–∏—Ö –ø–∏–∫–æ–≤ –æ–∫–æ–ª–æ 0.4 –∏ 0.7)

–°–∏–ª—å–Ω—ã—Ö —Ä–∞–∑–ª–∏—á–∏–π –º–µ–∂–¥—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–æ–π —Ç–∞–∫–∂–µ –Ω–µ –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è

### –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

–ü–æ—Å—Ç—Ä–æ–∏–º –º–∞—Ç—Ä–∏—Ü—É –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ $\phi_k$


```python
phik_coef_train = sat_df.phik_matrix(interval_cols = ['job_satisfaction_rate', 'salary'])
phik_coef_test= test_df.phik_matrix(interval_cols = ['job_satisfaction_rate', 'salary'])
```


```python
plot_correlation_matrix(
    phik_coef_train.values,
    x_labels = phik_coef_train.columns,
    y_labels = phik_coef_train.index,
    title = '–ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ $\phi_k$ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ',
    figsize=(15, 12),
    fontsize_factor=1.5
)

plot_correlation_matrix(
    phik_coef_test.values,
    x_labels = phik_coef_test.columns,
    y_labels = phik_coef_test.index,
    title = '–ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ $\phi_k$ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ',
    figsize=(15, 12),
    fontsize_factor=1.5
)
```


    
![png](output_61_0.png)
    



    
![png](output_61_1.png)
    


–ú–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∫–∞–∫ –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–∂–∏–¥–∞–µ–º—ã–µ —Å–≤—è–∑–∏: —Ç–æ, —á—Ç–æ –∑–∞—Ä–ø–ª–∞—Ç–∞ –¥–æ–≤–æ–ª—å–Ω–æ —Å–∏–ª—å–Ω–æ —Å–≤—è–∑–∞–Ω–∞ —Å —É—Ä–æ–≤–Ω–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏ –µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å—é (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã 0.72 –∏ 0.78 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ), –∞ —Ç–∞–∫–∂–µ —Ç–æ, —á—Ç–æ —É—Ä–æ–≤–µ–Ω—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–ª—å–Ω–æ —Å–≤—è–∑–∞–Ω —Å –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ 0.68), —Ç–∞–∫ –∏ –Ω–µ —Å–∞–º—ã–µ –æ—á–µ–≤–∏–¥–Ω—ã–µ - –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–æ, —á—Ç–æ —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–æ–π –∏ –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∫–æ–º–ø–∞–Ω–∏–µ–π —Ç–∞–∫–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–ª—å–Ω–æ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É—é—Ç (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ 0.76). 

–ó–∞–º–µ—Ç–Ω—ã—Ö —Ä–∞–∑–ª–∏—á–∏–π –≤ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

–û–¥–Ω–∞–∫–æ –Ω–∞–¥–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ $\phi_k$ –∑–∞–º–µ—á–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –ª–∏–Ω–µ–π–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ü–æ—Å—Ç—Ä–æ–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏–∞–≥—Ä–∞–º–º —Ä–∞—Å—Å–µ—è–Ω–∏—è –º–µ–∂–¥—É –∑–∞–º–µ—Ç–Ω–æ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É—é—â–∏–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ç–∏–ø—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Ç–æ–ª—å–∫–æ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ)


```python
def show_scatter_corr(df, x, y, title, sign = None):
    if sign == None:
        plt.scatter(x = df[x], y = df[y])
    else:
        sign_list = df[sign].unique()
        colors = ['blue', 'red', 'green', 'pink', 'yellow', 'black']
        col_dict = {}
        for i in range(len(sign_list)):
            col_dict[sign_list[i]] = colors[i]
        scatter = plt.scatter(x = df[x], y = df[y], c = df[sign].map(col_dict))
    plt.title(title)
    plt.xlabel(x)
    plt.ylabel(y)
    plt.show()
```


```python
show_scatter_corr(sat_df, 'salary', 'job_satisfaction_rate', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Å–µ—è–Ω–∏—è —É—Ä–æ–≤–Ω—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–æ–π –æ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã —Å —É—á—ë—Ç–æ–º —É—Ä–æ–≤–Ω—è', 'level')
```


    
![png](output_65_0.png)
    



```python
show_scatter_corr(sat_df, 'employment_years', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Å–µ—è–Ω–∏—è –∑–∞—Ä–ø–ª–∞—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–æ–π –æ—Ç —Å—Ç–∞–∂–∞ —Å —É—á—ë—Ç–æ–º –æ—Ç–¥–µ–ª–∞', 'dept')
```


    
![png](output_66_0.png)
    



```python
show_scatter_corr(sat_df, 'salary', 'job_satisfaction_rate', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Å–µ—è–Ω–∏—è —É—Ä–æ–≤–Ω—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–æ–π –æ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã —Å —É—á—ë—Ç–æ–º —É—Ä–æ–≤–Ω—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏', 'workload')
```


    
![png](output_67_0.png)
    



```python
show_scatter_corr(sat_df, 'employment_years', 'job_satisfaction_rate', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Å–µ—è–Ω–∏—è —É—Ä–æ–≤–Ω—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–æ–π –æ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã —Å —É—á—ë—Ç–æ–º —É—Ä–æ–≤–Ω—è', 'workload')
```


    
![png](output_68_0.png)
    



```python
show_scatter_corr(sat_df, 'supervisor_evaluation', 'job_satisfaction_rate', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Å–µ—è–Ω–∏—è —É—Ä–æ–≤–Ω—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–æ–π –æ—Ç –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å —É—á—ë—Ç–æ–º —É—Ä–æ–≤–Ω—è', 'level')
```


    
![png](output_69_0.png)
    


–í–æ –≤—Å–µ—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–∞—Ö –Ω–∏–∫–∞–∫–æ–π —á—ë—Ç–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –Ω–µ –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è, –ª–∏—à—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Ä–æ–≤–Ω—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–æ–π –æ—Ç –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º –≤–∏–¥–Ω–µ–µ—Ç—Å—è –Ω–µ–∫–∞—è –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç—å: –≤ —Å—Ä–µ–¥–Ω–µ–º —á–µ–º –≤—ã—à–µ –æ—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã, —Ç–µ–º –≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏. –ù–æ –≤—Å—ë –∂–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –Ω–µ —Å–∏–ª—å–Ω–∞—è.

–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, —Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–æ—Å—å –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω–æ–µ: –∑–∞—Ä–ø–ª–∞—Ç–∞ —Å–∏–ª—å–Ω–æ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç —Å —É—Ä–æ–≤–Ω–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–ø–µ—Ä–≤—ã–π –≥—Ä–∞—Ñ–∏–∫) –∏ –µ–≥–æ –∑–∞–≥—É–∂–µ–Ω–Ω–æ—Å—Ç—å—é (—Ç—Ä–µ—Ç–∏–π –≥—Ä–∞—Ñ–∏–∫)

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∫–æ–¥–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

* *dept*, *last_year_violation*, *last_year_promo* - —á–µ—Ä–µ–∑ OneHot Encoder, —Ç.–∫. —É –ø—Ä–∏–∑–Ω–∞–∫–∞ *dept* –±–æ–ª–µ–µ 2 –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è –ø—Ä–æ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞—Ç—å –æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É (—É *last_year_violation* –∏ *last_year_promo* –≤—Å–µ–≥–æ –ø–æ 2 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–∞–∫ —á—Ç–æ –±–µ–∑ —Ä–∞–∑–Ω–∏—Ü—ã, –∫–∞–∫ –∏—Ö –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å)

* *level*, *workload*  - —á–µ—Ä–µ–∑ OrdinalEncoder, —Ç.–∫. –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–Ω–∂–∏—Ä—É—é—Ç—Å—è –æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫ –±–æ–ª—å—à–µ–º—É

–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –±—É–¥–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Standardscaler, RobustScaler –∏ MinMaxScaler, –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –≤—ã–±–µ—Ä–µ–º –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç


```python
ord_col = ['level', 'workload']
ord_cats = [['junior', 'middle', 'senior'], ['low', 'medium', 'high']]
ohe_col = ['dept', 'last_year_violations', 'last_year_promo']
num_col = sat_df.select_dtypes(['int', 'float']).drop(['job_satisfaction_rate'], axis = 1).columns.tolist()

ohe_pipe = Pipeline(
    [
        (
            'simpleImputer_ohe',
            SimpleImputer(missing_values=np.nan, strategy = 'most_frequent')
        ),
        
        (
            'ohe', OneHotEncoder(drop = 'first', handle_unknown = 'ignore',
                                sparse_output = False)
        )
    ]
)

ord_pipe = Pipeline(
    [
        (
            'simpleImputer_before_ord', 
            SimpleImputer(missing_values=np.nan, strategy='most_frequent')
        ),
        
        (
            'ord', OrdinalEncoder(handle_unknown = 'use_encoded_value',\
                               unknown_value=np.nan, categories = ord_cats)
        ),
        
        (
         'simpleImputer_after_ord', 
            SimpleImputer(missing_values=np.nan, strategy='most_frequent')
        )
    ]
)

preprocessor_pipe = ColumnTransformer(
    [
    ('ohe', ohe_pipe, ohe_col),
    ('ord', ord_pipe, ord_col),
    ('num', RobustScaler(), num_col) # –≤—ã–±–µ—Ä–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–¥–Ω–µ–µ
    ],
    remainder = 'passthrough'
)

pipe_final = Pipeline(
    [
        ('preprocessor', preprocessor_pipe),
        ('model', None)#–≤—ã–±–µ—Ä–µ–º –º–æ–¥–µ–ª—å –ø–æ–∑–¥–Ω–µ–µ
    ]
)
```

## –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

–î–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–ª–µ–≤–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞ –æ–±—É—á–∏–º 3 –º–æ–¥–µ–ª–∏: DecisionTreeRegressor, LinearRegression –∏ Lasso. –û—Ü–µ–Ω–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ –±—É–¥–µ–º –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏:

$$SMAPE = \frac{100}{n}\sum\limits_{i = 1}^n \frac{|y_i - \overline{y_i}|}{(|y_i| + |\overline{y_i}|)/2}$$


```python
def smape(y_true, y_pred):
    y_true = np.asarray(y_true)
    y_pred = np.asarray(y_pred)
    return 100 * np.mean(np.abs(y_true - y_pred) / ((np.abs(y_true) + np.abs(y_pred)) / 2.0))
```


```python
X_train = sat_df.drop(['job_satisfaction_rate'], axis = 1)
```


```python
y_train = sat_df['job_satisfaction_rate']

param_grid = [
    {
        'preprocessor__num': [StandardScaler(), RobustScaler(), MinMaxScaler()],
        'model': [DecisionTreeRegressor(random_state=RANDOM_STATE)],
        'model__max_depth': [10, 20, 25, 30, 35],
        'model__max_features': ['sqrt'],
        'model__min_samples_split': [1, 2, 5, 10],
        'model__min_samples_leaf': [1, 2, 4]
        
    },
    
    {
        'preprocessor__num': [MinMaxScaler(), RobustScaler()],
        'model': [LinearRegression()]
    },
    
    {
        'preprocessor__num': [MinMaxScaler(), RobustScaler()],
        'model': [Lasso()],
        'model__alpha': [0.01, 0.1, 1.0, 10.0, 100.0]
    }
]

smape_scorer = make_scorer(smape, greater_is_better = False)
```


```python
grid_search = GridSearchCV(
    pipe_final,
    param_grid=param_grid, 
    cv = KFold(n_splits=10, shuffle=True, random_state=RANDOM_STATE),
    scoring=smape_scorer,
    n_jobs=-1
)
```


```python
grid_search.fit(X_train, y_train)

X_test = test_df.drop(['job_satisfaction_rate'], axis = 1)
y_test = test_df['job_satisfaction_rate']

y_pred = grid_search.predict(X_test)

y_train_pred = grid_search.predict(X_train)

print('–õ—É—á—à–∞—è –º–æ–¥–µ–ª—å –∏ –µ—ë –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:\n\n', grid_search.best_estimator_)
print('–ú–µ—Ç—Ä–∏–∫–∞ smape –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ', abs(round(grid_search.best_score_, 2)))
```

    –õ—É—á—à–∞—è –º–æ–¥–µ–ª—å –∏ –µ—ë –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
    
     Pipeline(steps=[('preprocessor',
                     ColumnTransformer(remainder='passthrough',
                                       transformers=[('ohe',
                                                      Pipeline(steps=[('simpleImputer_ohe',
                                                                       SimpleImputer(strategy='most_frequent')),
                                                                      ('ohe',
                                                                       OneHotEncoder(drop='first',
                                                                                     handle_unknown='ignore',
                                                                                     sparse_output=False))]),
                                                      ['dept',
                                                       'last_year_violations',
                                                       'last_year_promo']),
                                                     ('ord',
                                                      Pipeline(steps=[('simpleImputer_befor...
                                                                                                  ['low',
                                                                                                   'medium',
                                                                                                   'high']],
                                                                                      handle_unknown='use_encoded_value',
                                                                                      unknown_value=nan)),
                                                                      ('simpleImputer_after_ord',
                                                                       SimpleImputer(strategy='most_frequent'))]),
                                                      ['level', 'workload']),
                                                     ('num', RobustScaler(),
                                                      ['employment_years',
                                                       'supervisor_evaluation',
                                                       'salary'])])),
                    ('model',
                     DecisionTreeRegressor(max_depth=20, max_features='sqrt',
                                           min_samples_leaf=2, random_state=42))])
    –ú–µ—Ç—Ä–∏–∫–∞ smape –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ 16.08



```python
print('–ú–µ—Ç—Ä–∏–∫–∞ smape –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ', round(smape(y_test, y_pred), 2))
model = grid_search.best_estimator_
```

    –ú–µ—Ç—Ä–∏–∫–∞ smape –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ 14.96



```python
rate_model = grid_search.best_estimator_
```

–£–¥–∞–ª–æ—Å—å –¥–æ—Å—Ç–∏—á—å –º–µ—Ç—Ä–∏–∫–∏ smape –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ 14.96: —ç—Ç–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–¥–∞–ª–∞ –º–æ–¥–µ–ª—å DecisionTreeRegressor —Å —Ñ—É–Ω–∫—Ü–∏–µ–π sqrt. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∑–Ω–∞—á–∏–º–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

## –ê–Ω–∞–ª–∏–∑ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤


```python
permutation = permutation_importance(model, X_test, y_test, scoring=smape_scorer)
feature_importance = pd.DataFrame({'Feature': X_test.columns, 'Importance': permutation['importances_mean']})
feature_importance = feature_importance.sort_values('Importance', ascending=True)
sns.set_style('white')
feature_importance.plot(x='Feature', y='Importance', kind='barh', figsize=(10, 6), title = '–í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –¥–ª—è –º–æ–¥–µ–ª–∏') 
plt.xlabel('importance')
plt.show()
```


    
![png](output_85_0.png)
    


–ö–∞–∫ –º—ã –≤–∏–¥–∏–º, —Å–∞–º—ã–º –≤–∞–∂–Ω—ã–º (—Å –±–æ–ª—å—à–∏–º –æ—Ç—Ä—ã–≤–æ–º) –ø—Ä–∏–∑–Ω–∞–∫–æ–º –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –æ–∫–∞–∑–∞–ª—Å—è –ø—Ä–∏–∑–Ω–∞–∫ *supervisor_evaluation*, —Ç.–µ. –æ—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º. –î–∞–ª–µ–µ –∏–¥—É—Ç —Å—Ç–∞–∂, –∑–∞—Ä–ø–ª–∞—Ç–∞ –∏ —É—Ä–æ–≤–µ–Ω—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞. –û—Å—Ç–∞–ª–æ—Å—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –≤ –∫–∞–∫—É—é –∏–º–µ–Ω–Ω–æ —Å—Ç–æ—Ä–æ–Ω—É —ç—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —Ü–µ–ª–µ–≤–æ–π


```python
X_test_transformed = rate_model.named_steps['preprocessor'].transform(X_test)

explainer = shap.Explainer(rate_model.named_steps['model'].predict,\
                          X_test_transformed,\
                          feature_names = rate_model.named_steps['preprocessor'].get_feature_names_out())

shap_values = explainer(X_test_transformed)
#shap.plots.beeswarm(shap_values, max_display = len(X_test_transformed)) 
shap.summary_plot(shap_values, max_display = len(X_test_transformed), show=False)

ax = plt.gca()

ax.set_title("–ì—Ä–∞—Ñ–∏–∫ Shap-–∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏–∑–Ω–∞–∫–æ–≤", fontdict={"size":15})
ax.set_ylabel("Feature", fontsize=13)

plt.show()
```

    PermutationExplainer explainer: 2001it [00:33, 46.71it/s]                          



    
![png](output_87_1.png)
    


–ò—Ç–æ–≥–æ, –≤ —Å—Ä–µ–¥–Ω–µ–º

* –ß–µ–º –≤—ã—à–µ –æ—Ü–µ–Ω–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–∞—á–∞–ª—å—Å—Ç–≤–æ–º, —Ç–µ–º –≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

* –ß–µ–º –±–æ–ª—å—à–µ —Å—Ç–∞–∂, —Ç–µ–º –≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

* –ß–µ–º –≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å, —Ç–µ–º –Ω–∏–∂–µ —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

* –ß–µ–º –≤—ã—à–µ –∑–∞—Ä–ø–ª–∞—Ç–∞, —Ç–µ–º –≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

## –í—ã–≤–æ–¥—ã

–°–∞–º–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –æ–∫–∞–∑–∞–ª–∞—Å—å –º–æ–¥–µ–ª—å DecisionTreeRegressor —Å —Ñ—É–Ω–∫—Ü–∏–µ–π sqrt. –°–∞–º—ã–º–∏ –≤–∞–∂–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –æ–∫–∞–∑–∞–ª–∞—Å—å –æ—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º. –î–∞–ª–µ–µ –∏–¥—É—Ç —Å—Ç–∞–∂, –∑–∞—Ä–ø–ª–∞—Ç–∞ –∏ —É—Ä–æ–≤–µ–Ω—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.

# –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏–∑ –∫–æ–º–ø–∞–Ω–∏–∏

–í —ç—Ç–æ–π –∑–∞–¥–∞—á–µ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç—å —Å–æ–∑–¥–∞—Ç—å –∏ –æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å, –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—é—â—É—é —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ –∫–æ–º–ø–∞–Ω–∏–∏

## –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö


```python
quit_df = pd.read_csv('/datasets/train_quit.csv')# —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
# –≤—Ö–æ–¥–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∏ —Ç–µ –∂–µ, —á—Ç–æ –∏ –¥–æ —ç—Ç–æ–≥–æ, –∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
test_quit_df = pd.read_csv('/datasets/test_target_quit.csv')# —Ü–µ–ª–µ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∏
display(quit_df.head())
display(test_features_df.head())
display(test_quit_df.head())
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>quit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>723290</td>
      <td>sales</td>
      <td>middle</td>
      <td>high</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>54000</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1</th>
      <td>814010</td>
      <td>sales</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>27600</td>
      <td>no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>155091</td>
      <td>purchasing</td>
      <td>middle</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>1</td>
      <td>37200</td>
      <td>no</td>
    </tr>
    <tr>
      <th>3</th>
      <td>257132</td>
      <td>sales</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>yes</td>
      <td>3</td>
      <td>24000</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>4</th>
      <td>910140</td>
      <td>marketing</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>25200</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>485046</th>
      <td>marketing</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>28800</td>
    </tr>
    <tr>
      <th>686555</th>
      <td>hr</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>30000</td>
    </tr>
    <tr>
      <th>467458</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
    </tr>
    <tr>
      <th>418655</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>6</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
    </tr>
    <tr>
      <th>789145</th>
      <td>hr</td>
      <td>middle</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>40800</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>quit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>999029</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>1</th>
      <td>372846</td>
      <td>no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>726767</td>
      <td>no</td>
    </tr>
    <tr>
      <th>3</th>
      <td>490105</td>
      <td>no</td>
    </tr>
    <tr>
      <th>4</th>
      <td>416898</td>
      <td>yes</td>
    </tr>
  </tbody>
</table>
</div>


## –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞


```python
quit_df.info()
quit_df.head()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 4000 entries, 0 to 3999
    Data columns (total 10 columns):
     #   Column                 Non-Null Count  Dtype 
    ---  ------                 --------------  ----- 
     0   id                     4000 non-null   int64 
     1   dept                   4000 non-null   object
     2   level                  4000 non-null   object
     3   workload               4000 non-null   object
     4   employment_years       4000 non-null   int64 
     5   last_year_promo        4000 non-null   object
     6   last_year_violations   4000 non-null   object
     7   supervisor_evaluation  4000 non-null   int64 
     8   salary                 4000 non-null   int64 
     9   quit                   4000 non-null   object
    dtypes: int64(4), object(6)
    memory usage: 312.6+ KB





<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>quit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>723290</td>
      <td>sales</td>
      <td>middle</td>
      <td>high</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>54000</td>
      <td>no</td>
    </tr>
    <tr>
      <th>1</th>
      <td>814010</td>
      <td>sales</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>27600</td>
      <td>no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>155091</td>
      <td>purchasing</td>
      <td>middle</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>1</td>
      <td>37200</td>
      <td>no</td>
    </tr>
    <tr>
      <th>3</th>
      <td>257132</td>
      <td>sales</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>yes</td>
      <td>3</td>
      <td>24000</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>4</th>
      <td>910140</td>
      <td>marketing</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>25200</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
</div>



–ü—Ä–æ–ø—É—Å–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

–ü—Ä–æ–≤–µ—Ä–∏–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã –Ω–∞ –Ω–µ—è–≤–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã


```python
for col in quit_df.select_dtypes('object').columns.tolist():
    print(col, quit_df[col].unique())

quit_df['level'] = quit_df['level'].replace('sinior', 'senior')
```

    dept ['sales' 'purchasing' 'marketing' 'technology' 'hr']
    level ['middle' 'junior' 'sinior']
    workload ['high' 'medium' 'low']
    last_year_promo ['no' 'yes']
    last_year_violations ['no' 'yes']
    quit ['no' 'yes']


–ù–µ—è–≤–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ


```python
quit_df = quit_df.drop_duplicates()
quit_df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    Int64Index: 4000 entries, 0 to 3999
    Data columns (total 10 columns):
     #   Column                 Non-Null Count  Dtype 
    ---  ------                 --------------  ----- 
     0   id                     4000 non-null   int64 
     1   dept                   4000 non-null   object
     2   level                  4000 non-null   object
     3   workload               4000 non-null   object
     4   employment_years       4000 non-null   int64 
     5   last_year_promo        4000 non-null   object
     6   last_year_violations   4000 non-null   object
     7   supervisor_evaluation  4000 non-null   int64 
     8   salary                 4000 non-null   int64 
     9   quit                   4000 non-null   object
    dtypes: int64(4), object(6)
    memory usage: 343.8+ KB


–ü–æ–ª–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ç–∞–∫–∂–µ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

–¢–µ–ø–µ—Ä—å –Ω–∞–∑–Ω–∞—á–∏–º –∏–Ω–¥–µ–∫—Å–æ–º —Å—Ç—Ä–æ–∫–∏ id —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞


```python
quit_df = quit_df.set_index('id')
quit_df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>quit</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>723290</th>
      <td>sales</td>
      <td>middle</td>
      <td>high</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>54000</td>
      <td>no</td>
    </tr>
    <tr>
      <th>814010</th>
      <td>sales</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>27600</td>
      <td>no</td>
    </tr>
    <tr>
      <th>155091</th>
      <td>purchasing</td>
      <td>middle</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>1</td>
      <td>37200</td>
      <td>no</td>
    </tr>
    <tr>
      <th>257132</th>
      <td>sales</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>yes</td>
      <td>3</td>
      <td>24000</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>910140</th>
      <td>marketing</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>25200</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
</div>



–¢–∞–±–ª–∏—Ü–∞ —Å –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ —É–∂–µ –±—ã–ª–∞ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏–º —Ç–∞–±–ª–∏—Ü—É —Å —Ü–µ–ª–µ–≤—ã–º –ø—Ä–∏–∑–Ω–∞–∫–æ–º –Ω–∞ –æ—à–∏–±–∫–∏ –∏ –æ–±—ä–µ–¥–∏–Ω–∏–º —Ç–∞–±–ª–∏—Ü—ã


```python
test_quit_df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 2000 entries, 0 to 1999
    Data columns (total 2 columns):
     #   Column  Non-Null Count  Dtype 
    ---  ------  --------------  ----- 
     0   id      2000 non-null   int64 
     1   quit    2000 non-null   object
    dtypes: int64(1), object(1)
    memory usage: 31.4+ KB


–ü—Ä–æ–ø—É—Å–∫–æ–≤ –Ω–µ—Ç


```python
test_quit_df['quit'].unique()
```




    array(['yes', 'no'], dtype=object)



–ù–µ—è–≤–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ç–∞–∫–∂–µ –Ω–µ—Ç

–ù–∞–∑–Ω–∞—á–∏–º –∏–Ω–¥–µ–∫—Å–æ–º —Å—Ç—Ä–æ–∫ id –∏ –æ–±—ä–µ–¥–∏–Ω–∏–º —Å —Ç–∞–±–ª–∏—Ü–µ–π –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∏


```python
test_quit_df = test_quit_df.set_index('id')
test_df2 = test_features_df.join(test_quit_df)
display(test_df2.head())
display(test_quit_df.head())
display(test_features_df.head())
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>quit</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>485046</th>
      <td>marketing</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>28800</td>
      <td>no</td>
    </tr>
    <tr>
      <th>686555</th>
      <td>hr</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>30000</td>
      <td>no</td>
    </tr>
    <tr>
      <th>467458</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
      <td>no</td>
    </tr>
    <tr>
      <th>418655</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>6</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
      <td>no</td>
    </tr>
    <tr>
      <th>789145</th>
      <td>hr</td>
      <td>middle</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>40800</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>quit</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>999029</th>
      <td>yes</td>
    </tr>
    <tr>
      <th>372846</th>
      <td>no</td>
    </tr>
    <tr>
      <th>726767</th>
      <td>no</td>
    </tr>
    <tr>
      <th>490105</th>
      <td>no</td>
    </tr>
    <tr>
      <th>416898</th>
      <td>yes</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>485046</th>
      <td>marketing</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>28800</td>
    </tr>
    <tr>
      <th>686555</th>
      <td>hr</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>30000</td>
    </tr>
    <tr>
      <th>467458</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
    </tr>
    <tr>
      <th>418655</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>6</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
    </tr>
    <tr>
      <th>789145</th>
      <td>hr</td>
      <td>middle</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>40800</td>
    </tr>
  </tbody>
</table>
</div>



```python
display(test_df2.query('quit == "yes"').head())
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>quit</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>429973</th>
      <td>purchasing</td>
      <td>middle</td>
      <td>medium</td>
      <td>6</td>
      <td>no</td>
      <td>no</td>
      <td>3</td>
      <td>42000</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>850699</th>
      <td>technology</td>
      <td>junior</td>
      <td>medium</td>
      <td>3</td>
      <td>no</td>
      <td>no</td>
      <td>3</td>
      <td>26400</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>937235</th>
      <td>sales</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>yes</td>
      <td>3</td>
      <td>26400</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>354261</th>
      <td>technology</td>
      <td>junior</td>
      <td>low</td>
      <td>3</td>
      <td>no</td>
      <td>no</td>
      <td>3</td>
      <td>14400</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>780847</th>
      <td>sales</td>
      <td>junior</td>
      <td>low</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>2</td>
      <td>14400</td>
      <td>yes</td>
    </tr>
  </tbody>
</table>
</div>


## –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏


```python
show_train_test_pie(quit_df, test_df2, 'dept', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –æ—Ç–¥–µ–ª—É')
```


    
![png](output_116_0.png)
    



    
![png](output_116_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>dept</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>hr</th>
      <td>0.1160</td>
      <td>0.1135</td>
    </tr>
    <tr>
      <th>marketing</th>
      <td>0.1455</td>
      <td>0.1395</td>
    </tr>
    <tr>
      <th>purchasing</th>
      <td>0.1470</td>
      <td>0.1365</td>
    </tr>
    <tr>
      <th>sales</th>
      <td>0.3595</td>
      <td>0.3815</td>
    </tr>
    <tr>
      <th>technology</th>
      <td>0.2320</td>
      <td>0.2275</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_train_test_pie(quit_df, test_df2, 'level', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏')
```


    
![png](output_117_0.png)
    



    
![png](output_117_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>level</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>junior</th>
      <td>0.48725</td>
      <td>0.4870</td>
    </tr>
    <tr>
      <th>middle</th>
      <td>0.42350</td>
      <td>0.4270</td>
    </tr>
    <tr>
      <th>senior</th>
      <td>0.08925</td>
      <td>0.0855</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_train_test_pie(quit_df, test_df2, 'workload', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏')
```


    
![png](output_118_0.png)
    



    
![png](output_118_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>workload</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>high</th>
      <td>0.1685</td>
      <td>0.1815</td>
    </tr>
    <tr>
      <th>low</th>
      <td>0.3020</td>
      <td>0.2965</td>
    </tr>
    <tr>
      <th>medium</th>
      <td>0.5295</td>
      <td>0.5215</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_train_test_pie(quit_df, test_df2, 'last_year_promo', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é –ø–æ–≤—ã—à–µ–Ω–∏—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥')
```


    
![png](output_119_0.png)
    



    
![png](output_119_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>last_year_promo</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.97175</td>
      <td>0.9685</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.02825</td>
      <td>0.0315</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_train_test_pie(quit_df, test_df2, 'last_year_violations', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é –Ω–∞—Ä—É—à–µ–Ω–∏–π –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥')
```


    
![png](output_120_0.png)
    



    
![png](output_120_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>last_year_violations</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.86375</td>
      <td>0.869</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.13625</td>
      <td>0.131</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_train_test_pie(quit_df, test_df2, 'quit', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é –Ω–∞—Ä—É—à–µ–Ω–∏–π –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥')
```


    
![png](output_121_0.png)
    



    
![png](output_121_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>quit</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.718</td>
      <td>0.718</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.282</td>
      <td>0.282</td>
    </tr>
  </tbody>
</table>
</div>


–î–∏—Å–±–∞–ª–∞–Ω—Å –≤ –ø—Ä–∏–Ω–∞–∫–∞—Ö –æ—á–µ–Ω—å —Å—Ö–æ–∂ —Å —Ç–µ–º, —á—Ç–æ –±—ã–ª –≤ –ø–µ—Ä–≤–æ–π –∑–∞–¥–∞—á–µ:

* level - —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —É—Ä–æ–≤–Ω—è *senior* –≤ 3 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ, —á–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —É—Ä–æ–≤–Ω—è *middle* –∏–ª–∏ *junior*

* last_year_promo - –ª–∏—à—å 2.8% —Å—Ç–æ—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ–ª—É—á–∞–ª–æ –ø–æ–≤—ã—à–µ–Ω–∏–µ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥

* last_year_violations - –ø–µ—Ä–µ–≤–µ—Å –≤ 6 —Ä–∞–∑ –≤ –ø–æ–ª—å–∑—É –Ω–µ–Ω–∞—Ä—É—à–∞–≤—à–∏—Ö —Ç—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä 

–ü–æ —Ü–µ–ª–µ–≤–æ–º—É –ø—Ä–∏–∑–Ω–∞–∫—É *quit* –ø–µ—Ä–µ–≤–µ—Å ~–≤ 3.5 —Ä–∞–∑–∞ –≤ –ø–æ–ª—å–∑—É –Ω–µ —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è (—É–≤–æ–ª–∏–ª–æ—Å—å 28% —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ –≤—ã–±–æ—Ä–∫–∏)

–ó–∞–º–µ—Ç–Ω—ã—Ö —Ä–∞–∑–ª–∏—á–∏–π –º–µ–∂–¥—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∞–º–∏ –Ω–µ –≤–∏–¥–Ω–æ

 ### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏

#### –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑


```python
quit_df.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>employment_years</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>4000.000000</td>
      <td>4000.000000</td>
      <td>4000.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>3.701500</td>
      <td>3.474750</td>
      <td>33805.800000</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.541852</td>
      <td>1.004049</td>
      <td>15152.415163</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>12000.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2.000000</td>
      <td>3.000000</td>
      <td>22800.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>3.000000</td>
      <td>4.000000</td>
      <td>30000.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>6.000000</td>
      <td>4.000000</td>
      <td>43200.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>10.000000</td>
      <td>5.000000</td>
      <td>96000.000000</td>
    </tr>
  </tbody>
</table>
</div>



–Ø–≤–Ω—ã—Ö –≤—ã–±—Ä–æ—Å–æ–≤ –Ω–µ –≤–∏–¥–Ω–æ

#### –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑


```python
show_train_test_barplot(quit_df, test_df2, 'employment_years', 'level', '–ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ —Å—Ç–∞–∂—É —Ä–∞–±–æ—Ç—ã')
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>employment_years</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.24625</td>
      <td>0.2605</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.19425</td>
      <td>0.1870</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.11975</td>
      <td>0.1170</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.09825</td>
      <td>0.0935</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.09050</td>
      <td>0.0895</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.07400</td>
      <td>0.0690</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.07700</td>
      <td>0.0870</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.04350</td>
      <td>0.0455</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.03400</td>
      <td>0.0330</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.02250</td>
      <td>0.0175</td>
    </tr>
  </tbody>
</table>
</div>



    
![png](output_128_1.png)
    



    
![png](output_128_2.png)
    



```python
show_train_test_barplot(quit_df, test_df2, 'supervisor_evaluation', 'level', '–ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –æ—Ü–µ–Ω–∫–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã')
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_train</th>
      <th>percentage_test</th>
    </tr>
    <tr>
      <th>supervisor_evaluation</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.05050</td>
      <td>0.0440</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.09775</td>
      <td>0.0980</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.30825</td>
      <td>0.2870</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.41350</td>
      <td>0.4285</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.13000</td>
      <td>0.1420</td>
    </tr>
  </tbody>
</table>
</div>



    
![png](output_129_1.png)
    



    
![png](output_129_2.png)
    



```python
show_hist_boxplot(quit_df, 'salary', 20, '–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—Ç—Ä–µ–Ω. –≤—ã–±–æ—Ä–∫–∞)', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—Ç—Ä–µ–Ω. –≤—ã–±–æ—Ä–∫–∞)')
show_hist_boxplot(test_df2, 'salary', 20, '–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—Ç–µ—Å—Ç. –≤—ã–±–æ—Ä–∫–∞)', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—Ç–µ—Å—Ç. –≤—ã–±–æ—Ä–∫–∞)')
```


    
![png](output_130_0.png)
    



    
![png](output_130_1.png)
    


–í—ã–≤–æ–¥—ã –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏:

* –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π –ø–æ —Å—Ç–∞–∂—É —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–æ–º–µ—Ä–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç—Å—è

* –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è - –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ—Ü–µ–Ω–æ–∫ - 3 –∏ 4

* –ó–∞—Ä–ø–ª–∞—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –±–ª–∏–∑–∫–æ –∫ –ü—É–∞—Å—Å–æ–Ω–æ–≤—Å–∫–æ–º—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é (–∏–∑-–∑–∞ —Ö–≤–æ—Å—Ç–∞ —Å–ø—Ä–∞–≤–∞)

–°–∏–ª—å–Ω—ã—Ö —Ä–∞–∑–ª–∏—á–∏–π –º–µ–∂–¥—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –≤ —Ç–µ—Å—Ç–æ–≤–æ–π –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ –Ω–µ—Ç

### –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

–ü–æ—Å—Ç—Ä–æ–∏–º –º–∞—Ç—Ä–∏—Ü—É –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ $\phi_k$


```python
phik_coef_train = quit_df.phik_matrix(interval_cols = ['salary'])

plot_correlation_matrix(
    phik_coef_train.values,
    x_labels = phik_coef_train.columns,
    y_labels = phik_coef_train.index,
    title = '–ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ $\phi_k$',
    figsize=(15, 12),
    fontsize_factor=1.5
)

phik_coef_test = test_df2.phik_matrix(interval_cols = ['salary'])

plot_correlation_matrix(
    phik_coef_test.values,
    x_labels = phik_coef_test.columns,
    y_labels = phik_coef_test.index,
    title = '–ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ $\phi_k$',
    figsize=(15, 12),
    fontsize_factor=1.5
)
```


    
![png](output_134_0.png)
    



    
![png](output_134_1.png)
    


–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ú–µ–∂–¥—É –∑–∞—Ä–ø–ª–∞—Ç–æ–π –∏ —É—Ä–æ–≤–Ω–µ–º —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 0.75, –∞ –º–µ–∂–¥—É –∑–∞—Ä–ø–ª–∞—Ç–æ–π –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å 0.79, —á—Ç–æ –±–ª–∏–∑–∫–æ –∫ —Å–∏–ª—å–Ω–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ —Å—Ç–æ–∏—Ç –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

–¢–∞–∫–∂–µ –≤–∏–¥–Ω–∞ –∑–∞–º–µ—Ç–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è:

* –ú–µ–∂–¥—É —Å—Ç–∞–∂–µ–º –∏ —É—Ä–æ–≤–Ω–µ–º

* –ú–µ–∂–¥—É —Å—Ç–∞–∂–µ–º –∏ "—Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å—é –∫ —É–≤–æ–ª—å–Ω–µ–Ω–∏—é"

* –ú–µ–∂–¥—É –∑–∞—Ä–ø–ª–∞—Ç–æ–π –∏ "—Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å—é –∫ —É–≤–æ–ª—å–Ω–µ–Ω–∏—é"

–ï—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞–æ–±–æ—Ä–æ—Ç –æ —Å–ª–∞–±–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏, —Ç–æ –≤–∏–¥–Ω–æ, —á—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫ *dept* –∏–º–µ–µ—Ç –Ω—É–ª–µ–≤—É—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é —Å —Ü–µ–ª–µ–≤—ã–º *quit*. –¢–∞–∫ —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –µ–≥–æ –Ω–∞–ª–∏—á–∏—è –≤ –æ–±—É—á–∞–µ–º–æ–π –º–æ–¥–µ–ª–∏ —Ç–∞–∫–∂–µ –ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –º–∞—Ç—Ä–∏—Ü—É —Ä–∞—Å—Å–µ—è–Ω–∏—è –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö *dept* –∏ *salary* —Å —É—á—ë—Ç–æ–º —É—Ä–æ–≤–Ω—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏


```python
show_scatter_corr(quit_df, 'dept', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Å–µ—è–Ω–∏—è –∑–∞—Ä–ø–ª–∞—Ç—ã –æ—Ç —É—Ä–æ–≤–Ω—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏', 'workload')
```


    
![png](output_137_0.png)
    


–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∏–¥–Ω–æ —á—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É –∑–∞—Ä–ø–ª–∞—Ç–∞–º–∏ –ø–æ —É—Ä–æ–≤–Ω—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏

### –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ä–µ—Ç–∞ —É–≤–æ–ª–∏–≤—à–µ–≥–æ—Å—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–≤–æ–ª–∏–ª–∏—Å—å –∏ —É —Ç–µ—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–ª–∏—Å—å, –∏ —Å–æ—Å—Ç–∞–≤–∏–º –æ–±—â–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç —É–≤–æ–ª–∏–≤—à–µ–≥–æ—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.

#### –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

##### –ê–Ω–∞–ª–∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤


```python
def show_quit_pie(df1, df2, col, val, tit):
    temp1 = pd.pivot_table(df1, index = col, values = val, aggfunc = 'count')
    temp1.columns = ['count_yes']
    temp1['percentage_quited'] = temp1['count_yes']/len(df1)
    temp1.plot(kind = 'pie', y = 'count_yes', title = tit + " –¥–ª—è —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤")
    plt.legend(bbox_to_anchor=( 1.05 , 1 ), loc='best', borderaxespad= 0)
    
    
    temp2 = pd.pivot_table(df2, index = col, values = val, aggfunc = 'count')
    temp2.columns = ['count_no']
    temp2['percentage_not_quited'] = temp2['count_no']/len(df2)
    temp2.plot(kind = 'pie', y = 'count_no', title = tit + " –¥–ª—è –Ω–µ —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤")
    plt.legend(bbox_to_anchor=( 1.05 , 1 ), loc='best', borderaxespad= 0)
    
    plt.show()
    display(temp1.join(temp2)[['percentage_quited', 'percentage_not_quited']])
```


```python
show_quit_pie(quit_df.query('quit == "yes"'), quit_df.query('quit == "no"'), 'dept', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –æ—Ç–¥–µ–ª—É')
```


    
![png](output_144_0.png)
    



    
![png](output_144_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_quited</th>
      <th>percentage_not_quited</th>
    </tr>
    <tr>
      <th>dept</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>hr</th>
      <td>0.102837</td>
      <td>0.121170</td>
    </tr>
    <tr>
      <th>marketing</th>
      <td>0.144504</td>
      <td>0.145891</td>
    </tr>
    <tr>
      <th>purchasing</th>
      <td>0.147163</td>
      <td>0.146936</td>
    </tr>
    <tr>
      <th>sales</th>
      <td>0.360816</td>
      <td>0.358983</td>
    </tr>
    <tr>
      <th>technology</th>
      <td>0.244681</td>
      <td>0.227019</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_quit_pie(quit_df.query('quit == "yes"'), quit_df.query('quit == "no"'), 'level', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏')
```


    
![png](output_145_0.png)
    



    
![png](output_145_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_quited</th>
      <th>percentage_not_quited</th>
    </tr>
    <tr>
      <th>level</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>junior</th>
      <td>0.889184</td>
      <td>0.329387</td>
    </tr>
    <tr>
      <th>middle</th>
      <td>0.095745</td>
      <td>0.552228</td>
    </tr>
    <tr>
      <th>senior</th>
      <td>0.015071</td>
      <td>0.118384</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_quit_pie(quit_df.query('quit == "yes"'), quit_df.query('quit == "no"'), 'workload', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏')
```


    
![png](output_146_0.png)
    



    
![png](output_146_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_quited</th>
      <th>percentage_not_quited</th>
    </tr>
    <tr>
      <th>workload</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>high</th>
      <td>0.107270</td>
      <td>0.192549</td>
    </tr>
    <tr>
      <th>low</th>
      <td>0.460106</td>
      <td>0.239903</td>
    </tr>
    <tr>
      <th>medium</th>
      <td>0.432624</td>
      <td>0.567549</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_quit_pie(quit_df.query('quit == "yes"'), quit_df.query('quit == "no"'), 'last_year_promo', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é –ø–æ–≤—ã—à–µ–Ω–∏—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥')
```


    
![png](output_147_0.png)
    



    
![png](output_147_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_quited</th>
      <th>percentage_not_quited</th>
    </tr>
    <tr>
      <th>last_year_promo</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.999113</td>
      <td>0.961003</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.000887</td>
      <td>0.038997</td>
    </tr>
  </tbody>
</table>
</div>



```python
show_quit_pie(quit_df.query('quit == "yes"'), quit_df.query('quit == "no"'), 'last_year_violations', 'salary', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é –Ω–∞—Ä—É—à–µ–Ω–∏–π –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥')
```


    
![png](output_148_0.png)
    



    
![png](output_148_1.png)
    



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_quited</th>
      <th>percentage_not_quited</th>
    </tr>
    <tr>
      <th>last_year_violations</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.797872</td>
      <td>0.889624</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.202128</td>
      <td>0.110376</td>
    </tr>
  </tbody>
</table>
</div>


–ß—Ç–æ –º—ã –≤–∏–¥–∏–º:

* –°–æ –≤—Å–µ—Ö –æ—Ç–¥–µ–ª–æ–≤ —É–≤–æ–ª—å–Ω—è–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ —á–∏—Å–ª–æ –ª—é–¥–µ–π

* –ê–±—Å–æ–ª—é—Ç–Ω–æ–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è (~89%) –±—ã–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ —É—Ä–æ–≤–Ω—è junior,  –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —Å—Ä–µ–¥–∏ –Ω–µ—É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –∏—Ö –ª–∏—à—å 33%

* –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å –Ω–∏–∑–∫–æ–π –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å—é —É–≤–æ–ª—å–Ω—è—é—Ç—Å—è —á–∞—â–µ: —Å—Ä–µ–¥–∏ —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è —Ç–∞–∫–∏—Ö 46%, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —Å—Ä–µ–¥–∏ –Ω–µ—É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –ª–∏—à—å 24%

* –ö—Ä–∞–π–Ω–µ –º–∞–ª–æ–µ —á–∏—Å–ª–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–≤–æ–ª–∏–ª–∏—Å—å, –ø–æ–ª—É—á–∞–ª–∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥ - –º–µ–Ω–µ–µ 0.01% —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –ø–æ–ª—É—á–∞–ª–∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —Å—Ä–µ–¥–∏ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —ç—Ç–æ—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –æ–∫–æ–ª–æ 3.8%

* –£–≤–æ–ª–∏–≤—à–∏–µ—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –≤ —Å—Ä–µ–¥–Ω–µ–º –Ω–∞—Ä—É—à–∞–ª–∏ —Ç—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä –≤ 2 —Ä–∞–∑–∞ —á–∞—â–µ, —á–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è (20% –ø—Ä–æ—Ç–∏–≤ 11%)

##### –ê–Ω–∞–ª–∏–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤


```python
def show_quit_barplot(df1, df2, col, val, tit):    
    temp1 = pd.pivot_table(df1, index = col, values = val, aggfunc = 'count')
    temp1.columns = ['count_yes']
    temp1['percentage_quited'] = temp1['count_yes']/len(df1)
    
    temp2 = pd.pivot_table(df2, index = col, values = val, aggfunc = 'count')
    temp2.columns = ['count_no']
    temp2['percentage_not_quited'] = temp2['count_no']/len(df2)
    
    temp = temp1.join(temp2)[['percentage_quited', 'percentage_not_quited']]
    display(temp)
    
    temp[col] = pd.Series([i for i in range(len(temp) + 1)])
    X_axis = np.arange(len(temp)) 
  
    plt.bar(X_axis - 0.2, temp['percentage_quited'], 0.4, label = '–£–≤–æ–ª–∏–≤—à–∏–µ—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏') 
    plt.bar(X_axis + 0.2, temp['percentage_not_quited'], 0.4, label = '–û—Å—Ç–∞–≤—à–∏–µ—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏') 

    plt.xticks(X_axis, temp[col] ) 
    plt.xlabel(col) 
    plt.ylabel("Percentage") 
    plt.title(tit) 
    plt.legend() 
    plt.show()
```


```python
show_quit_barplot(quit_df.query('quit == "yes"'), quit_df.query('quit == "no"'), 'employment_years', 'level', '–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ —Å—Ç–∞–∂—É –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–∏ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –∏ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è')

```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_quited</th>
      <th>percentage_not_quited</th>
    </tr>
    <tr>
      <th>employment_years</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.531028</td>
      <td>0.134401</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.257092</td>
      <td>0.169568</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.144504</td>
      <td>0.110028</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.023936</td>
      <td>0.127437</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.020390</td>
      <td>0.118036</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.008865</td>
      <td>0.099582</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.006206</td>
      <td>0.104805</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.002660</td>
      <td>0.059540</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.002660</td>
      <td>0.046309</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.002660</td>
      <td>0.030292</td>
    </tr>
  </tbody>
</table>
</div>



    
![png](output_152_1.png)
    



```python
show_quit_barplot(quit_df.query('quit == "yes"'), quit_df.query('quit == "no"'), 'supervisor_evaluation', 'level', '–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –æ—Ü–µ–Ω–∫–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–∏ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –∏ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è')
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>percentage_quited</th>
      <th>percentage_not_quited</th>
    </tr>
    <tr>
      <th>supervisor_evaluation</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.084220</td>
      <td>0.037256</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.145390</td>
      <td>0.079039</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.463652</td>
      <td>0.247214</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.253546</td>
      <td>0.476323</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.053191</td>
      <td>0.160167</td>
    </tr>
  </tbody>
</table>
</div>



    
![png](output_153_1.png)
    



```python
show_hist_boxplot(quit_df.query('quit == "yes"'), 'salary', 20, '–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—É–≤–æ–ª–∏–≤—à–∏–µ—Å—è)', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (—É–≤–æ–ª–∏–≤—à–∏–µ—Å—è)')
show_hist_boxplot(quit_df.query('quit == "no"'), 'salary', 20, '–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (–æ—Å—Ç–∞–≤—à–∏–µ—Å—è)', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–∞–º (–æ—Å—Ç–∞–≤—à–∏–µ—Å—è)')

sns.histplot(quit_df.query('quit == "yes"')['salary'], color = 'blue', bins = 20, stat='density', common_norm=False, label = 'quited')
sns.histplot(quit_df.query('quit == "no"')['salary'], color = 'red', bins = 20, stat='density', common_norm=False, label = 'not quited')

plt.axvline(x=np.nanmean (quit_df.query('quit == "yes"')['salary']), color='blue', linestyle='--', linewidth= 3 , label='—Å—Ä–µ–¥–Ω–µ–µ (–¥–ª—è —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è) = ' + str(round(quit_df.query('quit == "yes"')['salary'].mean(), 2))) 
plt.axvline(x=np.nanmean (quit_df.query('quit == "no"')['salary']), color='red', linestyle='--', linewidth= 3 , label='—Å—Ä–µ–¥–Ω–µ–µ (–¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è) = ' + str(round(quit_df.query('quit == "no"')['salary'].mean(), 2))) 
plt.legend()
plt.show()
```


    
![png](output_154_0.png)
    



    
![png](output_154_1.png)
    



    
![png](output_154_2.png)
    


–í–∏–¥–Ω–æ, —á—Ç–æ:

* –ü–æ–ª–æ–≤–∏–Ω–∞ —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è —Ä–∞–±–æ—Ç–∞–ª–∞ –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –≥–æ–¥, –µ—à–µ 25% - –≤—Ç–æ—Ä–æ–π –≥–æ–¥. –î–æ–ª—è –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–≤—à–∏—Ö –±–æ–ª–µ–µ 3 –ª–µ—Ç —Å—Ä–µ–¥–∏ —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –æ—á–µ–Ω—å –º–∞–ª–∞

* –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–≤–æ–ª–∏–ª–∏—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∏–∂–µ —á–µ–º —É –Ω–µ—É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è

* –ó–∞—Ä–ø–ª–∞—Ç—ã —É —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –≤ —Å—Ä–µ–¥–Ω–µ–º ~ –≤ 1.6 —Ä–∞–∑ –Ω–∏–∂–µ, —á–µ–º —É –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è (—á—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ —ç—Ç–æ –ø–æ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ "–¥–∂—É–Ω—ã" —Å –º–∞–ª—ã–º —Å—Ç–∞–∂–µ–º)

#### –ü–æ—Ä—Ç—Ä–µ—Ç —É–≤–æ–ª–∏–≤—à–µ–≥–æ—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

–ò–∑ –≤—ã—à–µ–ø–æ–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∏–º –ø–æ—Ä—Ç—Ä–µ—Ç —Å—Ä–µ–¥–Ω–µ—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–≤–æ–ª–∏–≤—à–µ–≥–æ—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:

* –ß–∞—â–µ –≤—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —É—Ä–æ–≤–Ω—è *junior*, –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–≤—à–∏–π –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –º–µ–Ω–µ–µ 3 –ª–µ—Ç

* –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –Ω–µ –ø–æ–ª—É—á–∞–ª –ø–æ–≤—ã—à–µ–Ω–∏—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥

* –ó–∞—Ä–ø–ª–∞—Ç–∞ –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–π (–≤ —Å—Ä–µ–¥–Ω–µ–º –≤ 1.6 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ, —á–µ–º —É –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤)

* –° –±–æ–ª—å—à–µ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é, —á–µ–º –Ω–µ—É–≤–æ–ª–∏–≤—à–∏–π—Å—è, –Ω–∞—Ä—É—à–∞–ª —Ç—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥

* –ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å—Ä–µ–¥–Ω–µ–º –Ω–∏–∂–µ, —á–µ–º —É –Ω–µ—É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —É–≤–æ–ª—å–Ω–µ–Ω–∏—è –æ—Ç —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–æ–π

–ü—Ä–æ–≤–µ–¥—ë–º –∏—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ: —Å—Ä–∞–≤–Ω–∏–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∞ *job_satisfaction_rate* —É —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –∏ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤


```python
rate_quit_df = test_rate_df.join(test_quit_df)
quited_rate = rate_quit_df.query('quit == "yes"')['job_satisfaction_rate']
not_quited_rate = rate_quit_df.query('quit == "no"')['job_satisfaction_rate']
```


```python
sns.histplot(quited_rate, color = 'blue', bins = 30, stat='density', common_norm=False, label = 'quited')
sns.histplot(not_quited_rate, color = 'red', bins = 30, stat='density', common_norm=False, label = 'not quited')

plt.axvline(x=np.nanmean (quited_rate), color='blue', linestyle='--', linewidth= 3 , label='–º–µ–¥–∏–∞–Ω–∞ (–¥–ª—è —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è) = ' + str(quited_rate.median())) 
plt.axvline(x=np.nanmean (not_quited_rate), color='red', linestyle='--', linewidth= 3 , label='–º–µ–¥–∏–∞–Ω–∞ (–¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è) = ' + str(not_quited_rate.median())) 
plt.legend()

plt.show()
```


    
![png](output_161_0.png)
    


–ö–∞–∫ –º—ã –≤–∏–¥–∏–º, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è: —É —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –ø–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ–¥–∏–∞–Ω–∞ 0.37, —É –æ—Å—Ç–∞–≤—à–∏—Ö—è - 0.66. –¢–∞–∫–∂–µ –≤–∏–¥–Ω–æ, —á—Ç–æ –¥–æ–ª—è –ª—é–¥–µ–π —Å —É—Ä–æ–≤–Ω–µ–º —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –±–æ–ª—å—à–µ 0.7 —Å—Ä–µ–¥–∏ —É–≤–æ–ª–∏–≤—à–∏—Ö—Å—è –∫—Ä–∞–π–Ω–µ –º–∞–ª–∞, —Ä–æ–≤–Ω–æ –∫–∞–∫ –∏ –º–µ–Ω—å—à–µ 0.3 —Å—Ä–µ–¥–∏ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è.

–ò–∑ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥, —á—Ç–æ —É—Ä–æ–≤–µ–Ω—å —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–æ–π –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ, —É–≤–æ–ª–∏—Ç—Å—è –ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∞ *job_satisfaction_rate_predict*

–î–æ–±–∞–≤–∏–º –≤ —Ç–∞–±–ª–∏—Ü—É –ø—Ä–∏–∑–Ω–∞–∫ *job_satisfaction_rate_predict*, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å–∫–∞–∂–µ—Ç –Ω–∞—à–∞ –º–æ–¥–µ–ª—å –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∑–∞–¥–∞—á–∏


```python
quit_df['job_satisfaction_rate_predict'] = rate_model.predict(quit_df.drop(['quit'], axis = 1))
```

–¢–∞–∫–∂–µ –ø—Ä–∏–∑–Ω–∞–∫ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏ –≤ —Ç–µ—Å—Ç–æ–≤—É—é –≤—ã–±–æ—Ä–∫—É. 


```python
test_df2['job_satisfaction_rate_predict'] = rate_model.predict(test_df2.drop(['quit'], axis = 1))
test_df2.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dept</th>
      <th>level</th>
      <th>workload</th>
      <th>employment_years</th>
      <th>last_year_promo</th>
      <th>last_year_violations</th>
      <th>supervisor_evaluation</th>
      <th>salary</th>
      <th>quit</th>
      <th>job_satisfaction_rate_predict</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>485046</th>
      <td>marketing</td>
      <td>junior</td>
      <td>medium</td>
      <td>2</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>28800</td>
      <td>no</td>
      <td>0.866667</td>
    </tr>
    <tr>
      <th>686555</th>
      <td>hr</td>
      <td>junior</td>
      <td>medium</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>30000</td>
      <td>no</td>
      <td>0.678750</td>
    </tr>
    <tr>
      <th>467458</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
      <td>no</td>
      <td>0.717692</td>
    </tr>
    <tr>
      <th>418655</th>
      <td>sales</td>
      <td>middle</td>
      <td>low</td>
      <td>6</td>
      <td>no</td>
      <td>no</td>
      <td>4</td>
      <td>19200</td>
      <td>no</td>
      <td>0.713333</td>
    </tr>
    <tr>
      <th>789145</th>
      <td>hr</td>
      <td>middle</td>
      <td>medium</td>
      <td>5</td>
      <td>no</td>
      <td>no</td>
      <td>5</td>
      <td>40800</td>
      <td>no</td>
      <td>0.809474</td>
    </tr>
  </tbody>
</table>
</div>



### –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–∑–Ω–∞–∫–∞


```python
display(quit_df['job_satisfaction_rate_predict'].describe())
```


    count    4000.000000
    mean        0.536237
    std         0.215670
    min         0.060000
    25%         0.348000
    50%         0.544000
    75%         0.690000
    max         0.985000
    Name: job_satisfaction_rate_predict, dtype: float64



```python
show_hist_boxplot(quit_df, 'job_satisfaction_rate_predict', 50, '–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏', '–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏')
```


    
![png](output_171_0.png)
    


–ö–∞–∫ –º—ã –≤–∏–¥–∏–º, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±–ª–∞–¥–∞–µ—Ç —Å–∫–æ—Ä–µ–µ –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–º –≤–∏–¥–æ–º (–µ—Å—Ç—å 4 –∏–ª–∏ 5 –æ—Ç—á—ë—Ç–ª–∏–≤—ã—Ö –ø–∏–∫–æ–≤), –æ–¥–Ω–∞–∫–æ –≤—ã–±—Ä–æ—Å–æ–≤ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ —Ä–∞–∑–º–∞—Ö–∞ –Ω–µ—Ç

–¢–µ–ø–µ—Ä—å –≤–∑–≥—è–Ω–µ–º –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏


```python
phik_coef = quit_df.phik_matrix(interval_cols = ['job_satisfaction_rate_predict'])

plot_correlation_matrix(
    phik_coef.values,
    x_labels = phik_coef.columns,
    y_labels = phik_coef.index,
    title = '–ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ $\phi_k$',
    figsize=(15, 12),
    fontsize_factor=1.5
)
```


    
![png](output_174_0.png)
    


–°–∏–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –º–∞—Ç—Ä–∏—Ü–µ –Ω–µ—Ç. –°—Ç–æ–∏—Ç —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å, —á—Ç–æ –Ω–æ–≤—ã–π –ø—Ä–∏–∑–Ω–∞–∫ –æ–±–ª–∞–¥–∞–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–µ–π —Å –ø—Ä–∏–∑–Ω–∞–∫–æ–º *supervisor_evaluation*

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–∞–π–ø–ª–∞–π–Ω –¥–ª—è –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–Ω–æ–≤–æ –ø–∏—Å–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ: –ø–æ–¥–æ–π–¥—ë—Ç —Ç–æ—Ç, —á—Ç–æ –±—ã–ª –Ω–∞–ø–∏—Å–∞–Ω –≤ –ø–µ—Ä–≤–æ–π –∑–∞–¥–∞—á–µ. –°—Ç–æ–∏—Ç —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–∫–∏ —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è


```python
ord_col_default = ['level', 'workload']
ord_cats_default = [['junior', 'middle', 'senior'], ['low', 'medium', 'high']]
ohe_col_default = ['dept', 'last_year_violations', 'last_year_promo']
num_col_default = quit_df.select_dtypes(['int', 'float']).columns.tolist()
```

## –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

–í —ç—Ç–æ–π –∑–∞–¥–∞—á–µ –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ –º—ã –±—É–¥–µ–º –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç—Ä–∏–∫–∏ roc-auc. –¢–∞–∫–∂–µ –ø–æ–º–∏–º–æ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–µ—Ä–µ–±–µ—Ä—ë–º –∏ —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤: –æ–±—É—á–∏–º –º–æ–¥–µ–ª—å —Å–æ –≤—Å–µ–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏, –±–µ–∑ *workload*, –±–µ–∑ *workload* –∏ *dept*, –∞ —Ç–∞–∫–∂–µ –±–µ–∑ *workload*, *dept* –∏ *level* (–æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø–æ "–ª–∏—à–Ω–∏–º" –ø—Ä–∏–∑–Ω–∞–∫–∞–º –¥–∞–Ω—ã –≤ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–º –∞–Ω–∞–ª–∏–∑–µ)


```python
def grid_quit_model(drop_cols):
    ord_col = []
    ord_cats = []
    ohe_col = []
    num_col = []
    
    for i in range(len(ord_col_default)):# —É–¥–∞–ª—è–µ–º –∏–∑ —Å—Ç–ø–∏—Å–∫–æ–≤ —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è/–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ, —á—Ç–æ –≤ –æ–±—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏ –Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç
        if not (ord_col_default[i] in drop_cols):
            ord_col.append(ord_col_default[i])
            ord_cats.append(ord_cats_default[i])
    
    for col in ohe_col_default:
        if not (col in drop_cols):
            ohe_col.append(col)
            
    for col in num_col_default:
        if not (col in drop_cols):
            num_col.append(col)
    
    
    ord_pipe = Pipeline(
        [
            (
                'simpleImputer_before_ord', 
                SimpleImputer(missing_values=np.nan, strategy='most_frequent')
            ),

            (
                'ord', OrdinalEncoder(handle_unknown = 'use_encoded_value',\
                                   unknown_value=np.nan, categories = ord_cats)
            ),

            (
             'simpleImputer_after_ord', 
                SimpleImputer(missing_values=np.nan, strategy='most_frequent')
            )
        ]
    )
    
    preprocessor_pipe = ColumnTransformer(
        [
        ('ohe', ohe_pipe, ohe_col),
        ('ord', ord_pipe, ord_col),
        ('num', RobustScaler(), num_col)
        ],
        remainder = 'passthrough'
    )

    pipe_final = Pipeline(
        [
            ('preprocessor', preprocessor_pipe),
            ('model', None)
        ]
    )
    
    X_train = quit_df.drop(drop_cols, axis = 1)
    lab = LabelEncoder()
    lab.fit(quit_df['quit'])
    y_train = lab.transform(quit_df['quit'])
    param_grid = [
        {
            'model': [KNeighborsClassifier()],
            'model__n_neighbors': range(2, 10)
        },

        {
            'model': [DecisionTreeClassifier(random_state = RANDOM_STATE)],
            'model__max_depth': [2, 5, 10],
            'model__min_samples_split': [1, 2, 5],
            'model__min_samples_leaf': [1, 2, 5]
        },

        {
            'model': [SVC(random_state = RANDOM_STATE, probability = True)],
            'model__kernel':['linear'],
            'model__C': [0.1, 1, 10]
        },

        {
            'model': [SVC(random_state = RANDOM_STATE, probability = True)],
            'model__kernel':['rbf'],
            'model__gamma': [0.0001, 0.001, 0.01]
        }
    ]

    grid_search = GridSearchCV(
        pipe_final,
        param_grid=param_grid, 
        cv = KFold(n_splits=5, shuffle=True, random_state=RANDOM_STATE),
        scoring='roc_auc',
        n_jobs=-1
    )

    grid_search.fit(X_train, y_train)
    
    if len(drop_cols) == 1:
        print('–ú–æ–¥–µ–ª—å, –æ–±—É—á–µ–Ω–Ω–∞—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤')
    else:
        print('–ú–æ–¥–µ–ª—å, –æ–±—É—á–µ–Ω–Ω–∞—è –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ —Å—Ç–æ–ª–±—Ü–æ–≤', drop_cols[1:])
    
    print('–ú–µ—Ç—Ä–∏–∫–∞ roc-auc –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ', abs(round(grid_search.best_score_, 3)))
    return  grid_search.best_estimator_
```


```python
model1 = grid_quit_model(['quit'])
print('\n -------------------------------------------------- \n')
model2 = grid_quit_model(['quit', 'workload'])
print('\n -------------------------------------------------- \n')
model3 = grid_quit_model(['quit', 'workload', 'dept'])
print('\n -------------------------------------------------- \n')
model4 = grid_quit_model(['quit', 'workload', 'dept', 'level'])
```

–ö–∞–∫ –º—ã –≤–∏–¥–∏–º, —Å–∞–º–æ–π –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª—å—é –≤—Å—ë –∂–µ –æ–∫–∞–∑–∞–ª–∞—Å—å —Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –æ–±—É—á–µ–Ω–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≤—Å–µ—Ö –∏–º–µ—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —ç—Ç—É –º–æ–¥–µ–ª—å –∏ –µ—ë —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ


```python
quit_model = model1
print('–õ—É—á—à–∞—è –º–æ–¥–µ–ª—å –∏ –µ—ë –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:\n\n', quit_model)

X_test = test_df2.drop(['quit'], axis = 1)
y_test = test_df2['quit']

y_pred_proba = quit_model.predict_proba(X_test)[:, 1]
print('–ú–µ—Ç—Ä–∏–∫–∞ roc-auc –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ', round(roc_auc_score(y_test, y_pred_proba), 3))
```

–õ—É—á—à–µ–π –º–æ–¥–µ–ª—å—é –æ–∫–∞–∑–∞–ª–∞—Å—å –º–æ–¥–µ–ª—å KNeighborsClassifier —Å —É—á–∏—Ç—ã–≤–∞–µ–º—ã–º —á–∏—Å–ª–æ–º —Å–æ—Å–µ–¥–µ–π 9. –ú–µ—Ç—Ä–∏–∫–∞ roc-auc –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ —Å–æ—Å—Ç–∞–≤–∏–ª–∞ 0.91

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –≤ —Ä–∞–±–æ—Ç–µ –º–æ–¥–µ–ª–∏

## –ê–Ω–∞–ª–∏–∑ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤


```python
X_test = test_df2.drop(['quit'], axis = 1)
y_test = test_df2['quit']
permutation = permutation_importance(quit_model, X_test, y_test, scoring=make_scorer(roc_auc_score))
feature_importance = pd.DataFrame({'Feature': X_test.columns, 'Importance': permutation['importances_mean']})
feature_importance = feature_importance.sort_values('Importance', ascending=True)
sns.set_style('white')
feature_importance.plot(x='Feature', y='Importance', kind='barh', figsize=(10, 6), title = '–í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –¥–ª—è –º–æ–¥–µ–ª–∏') 
plt.xlabel('Importance')
plt.show()
```

–°–∞–º—ã–º–∏ –≤–∞–∂–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –¥–ª—è –º–æ–¥–µ–ª–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å *level* - —É—Ä–æ–≤–µ–Ω—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, *job_satisfaction_rate_predict* - –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏ *employment_years* - —Å—Ç–∞–∂ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞. –í —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –ø—Ä–∏–∑–Ω–∞–∫–∏ *last_year_violations* –∏ *last_year_promo* –ø–æ—á—Ç–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏. –ü–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —Ü–µ–ª–µ–≤–æ–π


```python
X_test_small = X_test.head(200)
X_test_transformed = quit_model.named_steps['preprocessor'].transform(X_test_small)

explainer = shap.Explainer(quit_model.named_steps['model'].predict,\
                          X_test_transformed,\
                          feature_names = quit_model.named_steps['preprocessor'].get_feature_names_out())

shap_values = explainer(X_test_transformed)
shap.summary_plot(shap_values, max_display = len(X_test_transformed), show=False)

ax = plt.gca()

ax.set_title("–ì—Ä–∞—Ñ–∏–∫ Shap-–∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏–∑–Ω–∞–∫–æ–≤", fontdict={"size":15})
ax.set_ylabel("Feature", fontsize=13)
plt.show()
```

–ò—Ç–æ–≥–æ, –≤ —Å—Ä–µ–¥–Ω–µ–º:

* –ß–µ–º –Ω–∏–∂–µ —É—Ä–æ–≤–µ–Ω—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, —Ç–µ–º –±–æ–ª—å—à–µ —à–∞–Ω—Å —É–≤–æ–ª—å–Ω–µ–Ω–∏—è

* –ß–µ–º –º–µ–Ω—å—à–µ —Å—Ç–∞–∂ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, —Ç–µ–º –±–æ–ª—å—à–µ —à–∞–Ω—Å —É–≤–æ–ª—å–Ω–µ–Ω–∏—è

* –ß–µ–º –Ω–∏–∂–µ —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–æ–π, —Ç–µ–º –±–æ–ª—å—à–µ —à–∞–Ω—Å —É–≤–æ–ª—å–Ω–µ–Ω–∏—è

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –Ω–µ –≤—Å—è —Ç–µ—Å—Ç–æ–≤–∞—è –≤—ã–±–æ—Ä–∫–∞, –∞ –ª–∏—à—å –¥–µ—Å—è—Ç–∞—è —á–∞—Å—Ç—å, —Ç.–∫. shap –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ —Å—á–∏—Ç–∞–µ—Ç explainer –¥–ª—è KNeighborsClassifier*

## –í—ã–≤–æ–¥—ã

–°–∞–º–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –º–æ–¥–µ–ª—å—é –æ–∫–∞–∑–∞–ª–∞—Å—å –º–æ–¥–µ–ª—å KNeighborsClassifier —Å —á–∏—Å–ª–æ–º —Å–æ—Å–µ–¥–µ–π 9. –í –º–æ–¥–µ–ª–∏ —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –≤—Å–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, –¥–∞–Ω–Ω—ã–µ –≤ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ, –∞ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º–æ–≥–æ —É—Ä–æ–≤–Ω—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.

–°–∞–º—ã–º–∏ –∑–Ω–∞—á–∏–º—ã–º–∏ –¥–ª—è –º–æ–¥–µ–ª–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å *level* - —É—Ä–æ–≤–µ–Ω—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, *job_satisfaction_rate_predict* - –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏ *employment_years* - —Å—Ç–∞–∂ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

# –û–±—â–∏–µ –≤—ã–≤–æ–¥—ã

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã

–í —Ö–æ–¥–µ —Ä–µ—à–µ–Ω–∏—è –∫–µ–π—Å–∞ –±—ã–ª–∏ –∏–∑—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏:

1) –í —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤—ã–±–æ—Ä–∫–∞—Ö –±—ã–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –¥–∏—Å–±–∞–ª–∞–Ω—Å—ã –∫–ª–∞—Å—Å–æ–≤ –º–Ω–æ–≥–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ *level*, *last_year_promo* –∏ *last_year_violations*), —á—Ç–æ, –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤—ã–±–æ—Ä–∫–∏, –≥–æ–≤–æ—Ä–∏—Ç –∏ –æ —Ä–µ–∞–ª—å–Ω–æ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ —ç—Ç–∏–º –ø—Ä–∏–∑–Ω–∞–∫–∞–º

2) –ù–∞ —ç—Ç–∞–ø–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –±—ã–ª–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Å–∏–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –º–µ–∂–¥—É –∑–∞—Ä–ø–ª–∞—Ç–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, –µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å—é –∏ —É—Ä–æ–≤–Ω–µ–º (—á—Ç–æ –≤ —Ü–µ–ª–æ–º –æ–∂–∏–¥–∞–µ–º–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ), –∞ —Ç–∞–∫–∂–µ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω–µ–º —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏ –æ—Ü–µ–Ω–∫–æ–π —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–∞—á–∞–ª—å—Å—Ç–≤–æ–º

3) –î–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —É—Ä–æ–≤–Ω—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ GridSearchCV –±—ã–ª–∏ –æ–±—É—á–µ–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ –º–æ–¥–µ–ª–∏ DecisionTreeRegressor, LinearRegression –∏ Lasso —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –ü–æ –∏—Ç–æ–≥—É –ª—É—á—à–µ–π –º–æ–¥–µ–ª—å—é —Å—Ç–∞–ª–∞ –º–æ–¥–µ–ª—å DecisionTreeRegressor —Å –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ max_depth=20, max_features='sqrt', min_samples_leaf=2. –ú–µ—Ç—Ä–∏–∫–∞ SMAPE —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ —Ä–∞–≤–Ω–∞ 14.96. –°–∞–º—ã–º–∏ –∑–Ω–∞—á–∏–º—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–º –æ–∫–∞–∑–∞–ª—Å—è –ø—Ä–∏–∑–Ω–∞–∫ *supervisor_evaluation* - –æ—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–∞—á–∞–ª—å—Å—Ç–≤–æ–º

4) –î–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —É—Ä–æ–≤–Ω—è —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ GridSearchCV –±—ã–ª–∏ –æ–±—É—á–µ–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ –º–æ–¥–µ–ª–∏ DecisionTreeClassifier, SVC –∏ KneighborsClassifier —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –ü–æ –∏—Ç–æ–≥—É –ª—É—á—à–µ–π –º–æ–¥–µ–ª—å—é —Å—Ç–∞–ª–∞ –º–æ–¥–µ–ª—å KneighborsClassifier —á–∏—Å–ª–æ–º —Å–æ—Å–µ–¥–µ–π 9. –ú–µ—Ç—Ä–∏–∫–∞ roc-auc –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ —Å–æ—Å—Ç–∞–≤–∏–ª–∞ 0.91. –°–∞–º—ã–º–∏ –≤–∞–∂–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –¥–ª—è –º–æ–¥–µ–ª–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å level - —É—Ä–æ–≤–µ–Ω—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, job_satisfaction_rate_predict - –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏ employment_years - —Å—Ç–∞–∂ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è:

* –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Å–∏–ª—å–Ω–æ —Å–≤—è–∑–∞–Ω–∞ —Å –µ–≥–æ —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ–π, —Ç–∞–∫ —á—Ç–æ –∑–∞ —ç—Ç–∏–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–º —Å–ª–µ–¥—É–µ—Ç —Å–ª–µ–¥–∏—Ç—å

* –£ –Ω–æ–≤–∏—á–∫–æ–≤ –≤ —Ñ–∏—Ä–º–µ (–º–∞–ª—ã–π —Å—Ç–∞–∂ –∏ —É—Ä–æ–≤–µ–Ω—å *junior*) –±–æ–ª—å—à–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç —É–≤–æ–ª—å–Ω–µ–Ω–∏–π, —á—Ç–æ –≤ —Ü–µ–ª–æ–º –ª–æ–≥–∏—á–Ω–æ (–Ω–æ–≤—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–æ–ª–µ–µ –ø–æ–¥–∞—Ç–ª–∏–≤—ã –∫ —Å–º–µ–Ω–µ –º–µ—Å—Ç–∞ —Ä–∞–±–æ—Ç—ã), –Ω–æ –≤—Å—ë –∂–µ –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–º–µ–Ω—å—à–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç —É–≤–æ–ª—å–Ω–µ–Ω–∏–π, —Å–ª–µ–¥—É–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –Ω–æ–≤–∏—á–∫–æ–≤ (–≤–æ–∑–º–æ–∂–Ω–æ, —É—Ä–æ–≤–µ–Ω—å –∑–∞—Ä–ø–ª–∞—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏)

* –ù–µ —Å–º–æ—Ç—Ä—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—É–Ω–∫—Ç, —É–¥–≤–æ–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –Ω–∏–∂–µ —É –±–æ–ª–µ–µ –æ–ø—ã—Ç–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —á—Ç–æ —Ç–æ–∂–µ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å - –≤–æ–∑–º–æ–∂–Ω–æ, —Ä–æ—Å—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã —Å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º —Å—Ç–∞–∂–∞ —Ä–∞—Å—Ç—ë—Ç –Ω–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ä—ã–Ω–æ—á–Ω—ã–º —Ç—Ä–µ–Ω–¥–æ–º
